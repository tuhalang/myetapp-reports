<?xml version="1.0" encoding="UTF-8"  ?>
<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport
		 name="BorangF2"
		 columnCount="1"
		 printOrder="Vertical"
		 orientation="Portrait"
		 pageWidth="595"
		 pageHeight="842"
		 columnWidth="535"
		 columnSpacing="0"
		 leftMargin="30"
		 rightMargin="30"
		 topMargin="20"
		 bottomMargin="20"
		 whenNoDataType="NoDataSection"
		 isTitleNewPage="false"
		 isSummaryNewPage="false">
	<property name="ireport.zoom" value="1.0" />
	<property name="ireport.x" value="0" />
	<property name="ireport.y" value="96" />
	<property name="ireport.scriptlethandling" value="0" />
	<property name="ireport.encoding" value="UTF-8" />
	<import value="java.util.*" />
	<import value="net.sf.jasperreports.engine.*" />
	<import value="net.sf.jasperreports.engine.data.*" />

	<parameter name="idfail" isForPrompting="true" class="java.lang.String"/>
	<parameter name="namaPegawai" isForPrompting="true" class="java.lang.String"/>
	<parameter name="jawatan" isForPrompting="true" class="java.lang.String"/>
	<parameter name="daerahMohon" isForPrompting="false" class="java.lang.String"/>
	<parameter name="idOB" isForPrompting="false" class="java.lang.String"/>
	<parameter name="ReportDir" isForPrompting="true" class="java.lang.String"/>
	<parameter name="idPermohonan" isForPrompting="false" class="java.lang.String"/>
	<parameter name="namaPentadbir" isForPrompting="true" class="java.lang.String"/>
	<parameter name="flagLampiran" isForPrompting="true" class="java.lang.Boolean"/>
	<parameter name="statusFail" isForPrompting="true" class="java.lang.String"/>
	<parameter name="flag_keb_kemaskini" isForPrompting="true" class="java.lang.String"/>
	<parameter name="NILAI_BERSIH_1" isForPrompting="true" class="java.lang.String"/>
	<parameter name="NILAI_BERSIH_2" isForPrompting="true" class="java.lang.String"/>
	<queryString><![CDATA[SELECT B.ID_FAIL,F.ID_PERMOHONAN,K.ID_PERBICARAAN,K.ID_KEPUTUSANPERMOHONAN,N.ID_PERINTAH, REPLACE(B.NO_FAIL,'&','&#38;') AS NO_FAIL, REPLACE(C.NAMA_DAERAH,'&','&#38;') AS DAERAH_MOHON, D.NAMA_NEGERI AS NEGERI_MOHON,
       TO_CHAR(A.TARIKH_MOHON,'yyyy') AS TAHUN, E.NAMA_SIMATI,E.NAMA_LAIN,
       CASE
        WHEN LENGTH(AAA.NO_KP1)<12 THEN  ''||RTRIM(AAA.NO_KP1)||''
        WHEN LENGTH(RTRIM(AAA.NO_KP1))=12 THEN SUBSTR(AAA.NO_KP1,1,6) || '-' || SUBSTR(AAA.NO_KP1,7,2) || '-' || SUBSTR(AAA.NO_KP1,9,4)
       ELSE SUBSTR(AAA.NO_KP1,1,6) || '-' || SUBSTR(AAA.NO_KP1,7,2) || '-' || SUBSTR(AAA.NO_KP1,9,4)  ||' ('||TRIM(SUBSTR(AAA.NO_KP1,13,LENGTH(AAA.NO_KP1)))||')'
       END  AS KP_SIMATI,
       CASE
        WHEN E.ALAMAT_1 IS NULL THEN '-'
        WHEN E.ALAMAT_1 IS NOT NULL THEN Upper(REPLACE(e.ALAMAT_1,'&','&#38;')) || ', ' || Upper(REPLACE(e.ALAMAT_2,'&','&#38;')) || ', ' || Upper(REPLACE(e.ALAMAT_3,'&','&#38;'))||',' ||REPLACE(e.poskod,'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
    WHEN E.ALAMAT_2 IS NULL AND E.ALAMAT_3 IS NULL THEN  REPLACE(UPPER(E.ALAMAT_1),',') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_2 IS NULL THEN REPLACE(UPPER(E.ALAMAT_1),',') ||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_3 IS NULL THEN REPLACE(UPPER(E.ALAMAT_1),',') ||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_3 IS NOT NULL THEN REPLACE(UPPER(E.ALAMAT_1),',')||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        ELSE '-'
       END AS ALAMAT_PENUH_SIMATI,

       TO_CHAR(E.TARIKH_MATI,'dd/mm/yyyy') AS TARIKH_MATI,
       REPLACE(E.NO_SIJIL_MATI,'&','&#38;') NO_SIJIL_MATI,
       H.NAMA_PEMOHON,H.NO_KP_BARU,
        CASE
         WHEN LENGTH(BBB.NO_KP2)<12 THEN  ''||RTRIM(BBB.NO_KP2)||''
         WHEN LENGTH(RTRIM(BBB.NO_KP2))=12 THEN SUBSTR(BBB.NO_KP2,1,6) || '-' || SUBSTR(BBB.NO_KP2,7,2) || '-' || SUBSTR(BBB.NO_KP2,9,4)
       ELSE SUBSTR(BBB.NO_KP2,1,6) || '-' || SUBSTR(BBB.NO_KP2,7,2) || '-' || SUBSTR(BBB.NO_KP2,9,4)  ||' ('||SUBSTR(BBB.NO_KP2,13,LENGTH(BBB.NO_KP2))||')'
       END  AS KP_PEMOHON,
        CASE
        WHEN H.ALAMAT1_SURAT IS NULL THEN '-'
        WHEN H.ALAMAT2_SURAT IS NULL AND H.ALAMAT3_SURAT IS NULL THEN  REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;') ||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;')|| ', ' || REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT2_SURAT IS NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT3_SURAT),','),'&','&#38;') || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT3_SURAT IS NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT2_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT3_SURAT IS NOT NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;')||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT2_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.ALAMAT3_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        ELSE '-'
       END AS ALAMAT_PENUH_PEMOHON,

       TO_CHAR (S.TARIKH_PERINTAH,'dd/mm/yyyy') AS TARIKH_PERINTAH,
       TO_CHAR (S.TARIKH_PERINTAH,'dd') AS HARI_PERINTAH,
       CASE
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='01' THEN 'Januari'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='02' THEN 'Februari'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='03' THEN 'Mac'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='04' THEN 'April'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='05' THEN 'Mei'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='06' THEN 'Jun'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='07' THEN 'Julai'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='08' THEN 'Ogos'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='09' THEN 'September'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='10' THEN 'Oktober'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='11' THEN 'November'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='12' THEN 'Disember'
      END AS BULAN_PERINTAH,
       TO_CHAR(S.TARIKH_PERINTAH,'yyyy') AS TAHUN_PERINTAH,
       CASE
        WHEN K.ALAMAT_BICARA1 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA2 IS NULL AND K.ALAMAT_BICARA3 IS NULL THEN  REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA2 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '||REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA3 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA3 IS NOT NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;')||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;')||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        ELSE 'TIADA'
       END AS ALAMAT_PENUH_BICARA,
       TO_CHAR (K.TARIKH_BICARA,'dd/mm/yyyy') AS TARIKH_BICARA,
       TO_CHAR (K.TARIKH_BICARA,'dd') AS HARI_BICARA,
       CASE
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='01' THEN 'Januari'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='02' THEN 'Februari'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='03' THEN 'Mac'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='04' THEN 'April'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='05' THEN 'Mei'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='06' THEN 'Jun'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='07' THEN 'Julai'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='08' THEN 'Ogos'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='09' THEN 'September'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='10' THEN 'Oktober'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='11' THEN 'November'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='12' THEN 'Disember'
       END AS BULAN_BICARA,
       TO_CHAR(K.TARIKH_BICARA,'yyyy') AS TAHUN_BICARA,
      CASE
        WHEN E.ID_BUKTIMATI = 1 THEN ', No. Sijil Mati: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 2 THEN ', Surat Sumpah Kematian: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 3 THEN ', Anggapan Kematian dari Mahkamah Tinggi: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 4 THEN ', No. Permit Kubur: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
    ELSE ''
       END AS BUKTI_MATI,
       (SELECT REPLACE(TO_CHAR(JUMLAH_BAYARAN,'999,999,999.99'),' ') FROM TBLPPKBAYARAN WHERE ID_PERMOHONAN = A.ID_PERMOHONAN AND ID_JENISBAYARAN = 26) AS CUKAI_PUSAKA,
         HIS.NO_PINDAAN, TO_CHAR(HIS.TARIKH_KEMASKINI,'DD/MM/YYYY') AS TARIKH_PINDAAN

  FROM TBLPPKPERMOHONAN A,
       TBLPFDFAIL B,
       TBLRUJDAERAH C,
       TBLRUJNEGERI D,
       TBLPPKSIMATI E,
       TBLPPKPERMOHONANSIMATI F,
       TBLRUJNEGERI G,
       TBLPPKPEMOHON H,
       TBLRUJBANDAR I,
       TBLRUJNEGERI J,
       TBLPPKPERBICARAAN K,
       TBLPPKKEPUTUSANPERMOHONAN L,
       TBLPPKPERINTAHHTAOBDTL M,
       TBLPPKPERINTAHHTAOBMST N,
       TBLPPKOB O,
       TBLRUJNEGERI P,
       TBLRUJBANDAR Q,
       TBLRUJNEGERI R,
       TBLPPKPERINTAH S,
       TBLRUJBANDAR T,
        (SELECT ID_FAIL, NO_PINDAAN, TARIKH_KEMASKINI FROM (
        SELECT H.ID_FAIL, H.NO_PINDAAN, H.TARIKH_KEMASKINI FROM TBLPPKBORANG_HISTORY H
        WHERE H.ID_FAIL = $P{idfail}
        ORDER BY H.TARIKH_KEMASKINI DESC) WHERE ROWNUM = 1)HIS ,
        (SELECT
      CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
      WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NULL THEN  TBLPPKSIMATI.NO_KP_LAIN
        WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAIN IS NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
         ELSE TBLPPKSIMATI.NO_KP_BARU
     END || '' ||
     CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS NOT NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
     END || '' ||
     CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS  NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAIN
     END AS NO_KP1 , ID_SIMATI
     FROM TBLPPKSIMATI ) AAA,
     (SELECT
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN  TBLPPKPEMOHON.NO_KP_LAMA
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NULL THEN  TBLPPKPEMOHON.NO_KP_LAIN
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAIN IS NULL THEN  TBLPPKPEMOHON.NO_KP_LAMA
         ELSE TBLPPKPEMOHON.NO_KP_BARU
     END || '' ||
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NOT NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN TBLPPKPEMOHON.NO_KP_LAMA
     END || '' ||
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS  NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN TBLPPKPEMOHON.NO_KP_LAIN
     END AS NO_KP2, ID_PEMOHON
     FROM TBLPPKPEMOHON ) BBB

 WHERE ((B.ID_FAIL = A.ID_FAIL)
        AND (D.ID_NEGERI = C.ID_NEGERI(+))
        AND (A.ID_NEGERIMHN = D.ID_NEGERI(+))
        AND (A.ID_DAERAHMHN = C.ID_DAERAH)
        AND (A.ID_PERMOHONAN = F.ID_PERMOHONAN)
        AND (F.ID_SIMATI = E.ID_SIMATI)
        AND (E.ID_NEGERI = G.ID_NEGERI(+))
        AND (E.ID_SIMATI = AAA.ID_SIMATI)
        AND (H.ID_PEMOHON = BBB.ID_PEMOHON)
        AND (H.ID_PEMOHON = A.ID_PEMOHON)
        AND (H.ID_BANDARSURAT = I.ID_BANDAR(+))
        AND (H.ID_NEGERISURAT = J.ID_NEGERI(+))
        AND (L.ID_KEPUTUSANPERMOHONAN = K.ID_KEPUTUSANPERMOHONAN)
        AND (A.ID_PERMOHONAN = L.ID_PERMOHONAN)
        AND (N.ID_JENISPERINTAH = 1)
        AND (N.ID_PERINTAHHTAOBMST = M.ID_PERINTAHHTAOBMST)
        AND (M.ID_OB = O.ID_OB(+))
        AND (M.STATUS_TADBIR = 'Y')
        AND (O.ID_BANDARSURAT = Q.ID_BANDAR(+))
        AND (O.ID_NEGERISURAT = P.ID_NEGERI(+))
        AND (K.ID_NEGERIBICARA = R.ID_NEGERI(+))
        AND (T.ID_BANDAR(+) = E.ID_BANDAR)
        AND (K.ID_PERBICARAAN = S.ID_PERBICARAAN)
        AND (N.ID_PERINTAH = S.ID_PERINTAH)
        AND (B.ID_FAIL=  $P!{idfail})
        AND (S.FLAG_JENIS_KEPUTUSAN = 0)
         and a.ID_FAIL = HIS.ID_FAIL(+)
       -- AND (K.BIL_BICARA IN (SELECT MAX(BIL_BICARA) AS BIL_BICARA FROM TBLPPKPERBICARAAN WHERE ID_KEPUTUSANPERMOHONAN = L.ID_KEPUTUSANPERMOHONAN))
       )

UNION

SELECT B.ID_FAIL,F.ID_PERMOHONAN,K.ID_PERBICARAAN,K.ID_KEPUTUSANPERMOHONAN,N.ID_PERINTAH, REPLACE(B.NO_FAIL,'&','&#38;') AS NO_FAIL, REPLACE(C.NAMA_DAERAH,'&','&#38;') AS DAERAH_MOHON, D.NAMA_NEGERI AS NEGERI_MOHON,
       TO_CHAR(A.TARIKH_MOHON,'yyyy') AS TAHUN, E.NAMA_SIMATI,E.NAMA_LAIN,

       CASE
        WHEN LENGTH(AAA.NO_KP1)<12 THEN  ''||RTRIM(AAA.NO_KP1)||''
        WHEN LENGTH(RTRIM(AAA.NO_KP1))=12 THEN SUBSTR(AAA.NO_KP1,1,6) || '-' || SUBSTR(AAA.NO_KP1,7,2) || '-' || SUBSTR(AAA.NO_KP1,9,4)
       ELSE SUBSTR(AAA.NO_KP1,1,6) || '-' || SUBSTR(AAA.NO_KP1,7,2) || '-' || SUBSTR(AAA.NO_KP1,9,4)  ||' ('||TRIM(SUBSTR(AAA.NO_KP1,13,LENGTH(AAA.NO_KP1)))||')'
       END  AS KP_SIMATI,
       CASE
        WHEN E.ALAMAT_1 IS NULL THEN '-'
        WHEN E.ALAMAT_1 IS NOT NULL THEN Upper(REPLACE(e.ALAMAT_1,'&','&#38;')) || ', ' || Upper(REPLACE(e.ALAMAT_2,'&','&#38;')) || ', ' || Upper(REPLACE(e.ALAMAT_3,'&','&#38;'))||',' ||REPLACE(e.poskod,'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
    WHEN E.ALAMAT_2 IS NULL AND E.ALAMAT_3 IS NULL THEN  REPLACE(UPPER(E.ALAMAT_1),',') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_2 IS NULL THEN REPLACE(UPPER(E.ALAMAT_1),',') ||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_3 IS NULL THEN REPLACE(UPPER(E.ALAMAT_1),',') ||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_3 IS NOT NULL THEN REPLACE(UPPER(E.ALAMAT_1),',')||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        ELSE '-'
       END AS ALAMAT_PENUH_SIMATI,
       TO_CHAR(E.TARIKH_MATI,'dd/mm/yyyy') AS TARIKH_MATI,
       REPLACE(E.NO_SIJIL_MATI,'&','&#38;') NO_SIJIL_MATI,
       H.NAMA_PEMOHON,H.NO_KP_BARU,
        CASE
         WHEN LENGTH(BBB.NO_KP2)<12 THEN  ''||RTRIM(BBB.NO_KP2)||''
         WHEN LENGTH(RTRIM(BBB.NO_KP2))=12 THEN SUBSTR(BBB.NO_KP2,1,6) || '-' || SUBSTR(BBB.NO_KP2,7,2) || '-' || SUBSTR(BBB.NO_KP2,9,4)
       ELSE SUBSTR(BBB.NO_KP2,1,6) || '-' || SUBSTR(BBB.NO_KP2,7,2) || '-' || SUBSTR(BBB.NO_KP2,9,4)  ||' ('||SUBSTR(BBB.NO_KP2,13,LENGTH(BBB.NO_KP2))||')'
       END  AS KP_PEMOHON,
       CASE
        WHEN H.ALAMAT1_SURAT IS NULL THEN '-'
        WHEN H.ALAMAT2_SURAT IS NULL AND H.ALAMAT3_SURAT IS NULL THEN  REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;') ||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;')|| ', ' || REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT2_SURAT IS NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT3_SURAT),','),'&','&#38;') || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT3_SURAT IS NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT2_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT3_SURAT IS NOT NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;')||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT2_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.ALAMAT3_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        ELSE '-'
       END AS ALAMAT_PENUH_PEMOHON,

        TO_CHAR (S.TARIKH_PERINTAH,'dd/mm/yyyy') AS TARIKH_PERINTAH,
       TO_CHAR (S.TARIKH_PERINTAH,'dd') AS HARI_PERINTAH,
       CASE
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='01' THEN 'Januari'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='02' THEN 'Februari'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='03' THEN 'Mac'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='04' THEN 'April'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='05' THEN 'Mei'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='06' THEN 'Jun'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='07' THEN 'Julai'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='08' THEN 'Ogos'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='09' THEN 'September'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='10' THEN 'Oktober'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='11' THEN 'November'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='12' THEN 'Disember'
      END AS BULAN_PERINTAH,
       TO_CHAR(S.TARIKH_PERINTAH,'yyyy') AS TAHUN_PERINTAH,

       CASE
        WHEN K.ALAMAT_BICARA1 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA2 IS NULL AND K.ALAMAT_BICARA3 IS NULL THEN  REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA2 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '||REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA3 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA3 IS NOT NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;')||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;')||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        ELSE 'TIADA'
       END AS ALAMAT_PENUH_BICARA,
       TO_CHAR (K.TARIKH_BICARA,'dd/mm/yyyy') AS TARIKH_BICARA,
       TO_CHAR (K.TARIKH_BICARA,'dd') AS HARI_BICARA,
       CASE
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='01' THEN 'Januari'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='02' THEN 'Februari'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='03' THEN 'Mac'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='04' THEN 'April'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='05' THEN 'Mei'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='06' THEN 'Jun'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='07' THEN 'Julai'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='08' THEN 'Ogos'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='09' THEN 'September'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='10' THEN 'Oktober'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='11' THEN 'November'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='12' THEN 'Disember'
       END AS BULAN_BICARA,
       TO_CHAR(K.TARIKH_BICARA,'yyyy') AS TAHUN_BICARA,
      CASE
        WHEN E.ID_BUKTIMATI = 1 THEN ', No. Sijil Mati: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 2 THEN ', Surat Sumpah Kematian: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 3 THEN ', Anggapan Kematian dari Mahkamah Tinggi: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 4 THEN ', No. Permit Kubur: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
    ELSE ''
       END AS BUKTI_MATI,
       (SELECT REPLACE(TO_CHAR(JUMLAH_BAYARAN,'999,999,999.99'),' ') FROM TBLPPKBAYARAN WHERE ID_PERMOHONAN = A.ID_PERMOHONAN AND ID_JENISBAYARAN = 26) AS CUKAI_PUSAKA,
         HIS.NO_PINDAAN, TO_CHAR(HIS.TARIKH_KEMASKINI,'DD/MM/YYYY') AS TARIKH_PINDAAN

  FROM TBLPPKPERMOHONAN A,
       TBLPFDFAIL B,
       TBLRUJDAERAH C,
       TBLRUJNEGERI D,
       TBLPPKSIMATI E,
       TBLPPKPERMOHONANSIMATI F,
       TBLRUJNEGERI G,
       TBLPPKPEMOHON H,
       TBLRUJBANDAR I,
       TBLRUJNEGERI J,
       TBLPPKPERBICARAAN K,
       TBLPPKKEPUTUSANPERMOHONAN L,
       TBLPPKPERINTAHHTAOBDTL M,
       TBLPPKPERINTAHHTAOBMST N,
       TBLPPKOB O,
       TBLRUJNEGERI P,
       TBLRUJBANDAR Q,
       TBLRUJNEGERI R,
       TBLPPKPERINTAH S,
       TBLRUJBANDAR T,
        (SELECT ID_FAIL, NO_PINDAAN, TARIKH_KEMASKINI FROM (
       SELECT H.ID_FAIL, H.NO_PINDAAN, H.TARIKH_KEMASKINI FROM TBLPPKBORANG_HISTORY H
       WHERE H.ID_FAIL = $P!{idfail}
        ORDER BY H.TARIKH_KEMASKINI DESC) WHERE ROWNUM = 1)  HIS   ,
        (SELECT
      CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
      WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NULL THEN  TBLPPKSIMATI.NO_KP_LAIN
        WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAIN IS NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
         ELSE TBLPPKSIMATI.NO_KP_BARU
     END || '' ||
     CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS NOT NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
     END || '' ||
     CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS  NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAIN
     END AS NO_KP1 , ID_SIMATI
     FROM TBLPPKSIMATI ) AAA,
     (SELECT
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN  TBLPPKPEMOHON.NO_KP_LAMA
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NULL THEN  TBLPPKPEMOHON.NO_KP_LAIN
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAIN IS NULL THEN  TBLPPKPEMOHON.NO_KP_LAMA
         ELSE TBLPPKPEMOHON.NO_KP_BARU
     END || '' ||
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NOT NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN TBLPPKPEMOHON.NO_KP_LAMA
     END || '' ||
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS  NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN TBLPPKPEMOHON.NO_KP_LAIN
     END AS NO_KP2, ID_PEMOHON
     FROM TBLPPKPEMOHON ) BBB


 WHERE ((B.ID_FAIL = A.ID_FAIL)
        AND (D.ID_NEGERI = C.ID_NEGERI(+))
        AND (A.ID_NEGERIMHN = D.ID_NEGERI(+))
        AND (A.ID_DAERAHMHN = C.ID_DAERAH)
        AND (A.ID_PERMOHONAN = F.ID_PERMOHONAN)
        AND (F.ID_SIMATI = E.ID_SIMATI)
        AND (E.ID_NEGERI = G.ID_NEGERI(+))
        AND (E.ID_SIMATI = AAA.ID_SIMATI)
        AND (H.ID_PEMOHON = BBB.ID_PEMOHON)
        AND (H.ID_PEMOHON = A.ID_PEMOHON)
        AND (H.ID_BANDARSURAT = I.ID_BANDAR(+))
        AND (H.ID_NEGERISURAT = J.ID_NEGERI(+))
        AND (L.ID_KEPUTUSANPERMOHONAN = K.ID_KEPUTUSANPERMOHONAN)
        AND (A.ID_PERMOHONAN = L.ID_PERMOHONAN)
        AND (N.ID_JENISPERINTAH = 2)
        AND (N.ID_PERINTAHHTAOBMST = M.ID_PERINTAHHTAOBMST)
        AND (M.ID_OB = O.ID_OB(+))
        AND (O.ID_BANDARSURAT = Q.ID_BANDAR(+))
        AND (O.ID_NEGERISURAT = P.ID_NEGERI(+))
        AND (K.ID_NEGERIBICARA = R.ID_NEGERI(+))
        AND (T.ID_BANDAR(+) = E.ID_BANDAR)
        AND (K.ID_PERBICARAAN = S.ID_PERBICARAAN)
        AND (N.ID_PERINTAH = S.ID_PERINTAH)
         and (a.ID_FAIL = HIS.ID_FAIL(+))
        AND (B.ID_FAIL=  $P!{idfail})
        AND (S.FLAG_JENIS_KEPUTUSAN = 0)
       -- AND (K.BIL_BICARA IN (SELECT MAX(BIL_BICARA) AS BIL_BICARA FROM TBLPPKPERBICARAAN WHERE ID_KEPUTUSANPERMOHONAN = L.ID_KEPUTUSANPERMOHONAN))
       )


UNION

SELECT B.ID_FAIL,F.ID_PERMOHONAN,K.ID_PERBICARAAN,K.ID_KEPUTUSANPERMOHONAN,N.ID_PERINTAH, REPLACE(B.NO_FAIL,'&','&#38;') AS NO_FAIL, REPLACE(C.NAMA_DAERAH,'&','&#38;') AS DAERAH_MOHON, D.NAMA_NEGERI AS NEGERI_MOHON,
       TO_CHAR(A.TARIKH_MOHON,'yyyy') AS TAHUN, E.NAMA_SIMATI,E.NAMA_LAIN,

       CASE
        WHEN LENGTH(AAA.NO_KP1)<12 THEN  ''||RTRIM(AAA.NO_KP1)||''
        WHEN LENGTH(RTRIM(AAA.NO_KP1))=12 THEN SUBSTR(AAA.NO_KP1,1,6) || '-' || SUBSTR(AAA.NO_KP1,7,2) || '-' || SUBSTR(AAA.NO_KP1,9,4)
       ELSE SUBSTR(AAA.NO_KP1,1,6) || '-' || SUBSTR(AAA.NO_KP1,7,2) || '-' || SUBSTR(AAA.NO_KP1,9,4)  ||' ('||TRIM(SUBSTR(AAA.NO_KP1,13,LENGTH(AAA.NO_KP1)))||')'
       END  AS KP_SIMATI,
       CASE
        WHEN E.ALAMAT_1 IS NULL THEN '-'
        WHEN E.ALAMAT_1 IS NOT NULL THEN Upper(REPLACE(e.ALAMAT_1,'&','&#38;')) || ', ' || Upper(REPLACE(e.ALAMAT_2,'&','&#38;')) || ', ' || Upper(REPLACE(e.ALAMAT_3,'&','&#38;'))||',' ||REPLACE(e.poskod,'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
    WHEN E.ALAMAT_2 IS NULL AND E.ALAMAT_3 IS NULL THEN  REPLACE(UPPER(E.ALAMAT_1),',') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_2 IS NULL THEN REPLACE(UPPER(E.ALAMAT_1),',') ||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_3 IS NULL THEN REPLACE(UPPER(E.ALAMAT_1),',') ||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_3 IS NOT NULL THEN REPLACE(UPPER(E.ALAMAT_1),',')||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        ELSE '-'
       END AS ALAMAT_PENUH_SIMATI,
       TO_CHAR(E.TARIKH_MATI,'dd/mm/yyyy') AS TARIKH_MATI,
       REPLACE(E.NO_SIJIL_MATI,'&','&#38;') NO_SIJIL_MATI,
       H.NAMA_PEMOHON,H.NO_KP_BARU,
        CASE
         WHEN LENGTH(BBB.NO_KP2)<12 THEN  ''||RTRIM(BBB.NO_KP2)||''
         WHEN LENGTH(RTRIM(BBB.NO_KP2))=12 THEN SUBSTR(BBB.NO_KP2,1,6) || '-' || SUBSTR(BBB.NO_KP2,7,2) || '-' || SUBSTR(BBB.NO_KP2,9,4)
       ELSE SUBSTR(BBB.NO_KP2,1,6) || '-' || SUBSTR(BBB.NO_KP2,7,2) || '-' || SUBSTR(BBB.NO_KP2,9,4)  ||' ('||SUBSTR(BBB.NO_KP2,13,LENGTH(BBB.NO_KP2))||')'
       END  AS KP_PEMOHON,
        CASE
        WHEN H.ALAMAT1_SURAT IS NULL THEN '-'
        WHEN H.ALAMAT2_SURAT IS NULL AND H.ALAMAT3_SURAT IS NULL THEN  REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;') ||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;')|| ', ' || REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT2_SURAT IS NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT3_SURAT),','),'&','&#38;') || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT3_SURAT IS NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT2_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT3_SURAT IS NOT NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;')||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT2_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.ALAMAT3_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        ELSE '-'
       END AS ALAMAT_PENUH_PEMOHON,
        TO_CHAR (S.TARIKH_PERINTAH,'dd/mm/yyyy') AS TARIKH_PERINTAH,
       TO_CHAR (S.TARIKH_PERINTAH,'dd') AS HARI_PERINTAH,
       CASE
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='01' THEN 'Januari'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='02' THEN 'Februari'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='03' THEN 'Mac'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='04' THEN 'April'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='05' THEN 'Mei'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='06' THEN 'Jun'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='07' THEN 'Julai'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='08' THEN 'Ogos'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='09' THEN 'September'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='10' THEN 'Oktober'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='11' THEN 'November'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='12' THEN 'Disember'
      END AS BULAN_PERINTAH,
       TO_CHAR(S.TARIKH_PERINTAH,'yyyy') AS TAHUN_PERINTAH,

       CASE
        WHEN K.ALAMAT_BICARA1 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA2 IS NULL AND K.ALAMAT_BICARA3 IS NULL THEN  REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA2 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '||REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA3 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA3 IS NOT NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;')||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;')||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        ELSE 'TIADA'
       END AS ALAMAT_PENUH_BICARA,
       TO_CHAR (K.TARIKH_BICARA,'dd/mm/yyyy') AS TARIKH_BICARA,
       TO_CHAR (K.TARIKH_BICARA,'dd') AS HARI_BICARA,
       CASE
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='01' THEN 'Januari'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='02' THEN 'Februari'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='03' THEN 'Mac'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='04' THEN 'April'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='05' THEN 'Mei'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='06' THEN 'Jun'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='07' THEN 'Julai'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='08' THEN 'Ogos'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='09' THEN 'September'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='10' THEN 'Oktober'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='11' THEN 'November'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='12' THEN 'Disember'
       END AS BULAN_BICARA,
       TO_CHAR(K.TARIKH_BICARA,'yyyy') AS TAHUN_BICARA,
      CASE
        WHEN E.ID_BUKTIMATI = 1 THEN ', No. Sijil Mati: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 2 THEN ', Surat Sumpah Kematian: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 3 THEN ', Anggapan Kematian dari Mahkamah Tinggi: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 4 THEN ', No. Permit Kubur: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
    ELSE ''
       END AS BUKTI_MATI,
       (SELECT REPLACE(TO_CHAR(JUMLAH_BAYARAN,'999,999,999.99'),' ') FROM TBLPPKBAYARAN WHERE ID_PERMOHONAN = A.ID_PERMOHONAN AND ID_JENISBAYARAN = 26) AS CUKAI_PUSAKA,
        HIS.NO_PINDAAN, TO_CHAR(HIS.TARIKH_KEMASKINI,'DD/MM/YYYY') AS TARIKH_PINDAAN
  FROM TBLPPKPERMOHONAN A,
       TBLPFDFAIL B,
       TBLRUJDAERAH C,
       TBLRUJNEGERI D,
       TBLPPKSIMATI E,
       TBLPPKPERMOHONANSIMATI F,
       TBLRUJNEGERI G,
       TBLPPKPEMOHON H,
       TBLRUJBANDAR I,
       TBLRUJNEGERI J,
       TBLPPKPERBICARAAN K,
       TBLPPKKEPUTUSANPERMOHONAN L,
       TBLPPKPERINTAHHAOBDTL M,
       TBLPPKPERINTAHHAOBMST N,
       TBLPPKOB O,
       TBLRUJNEGERI P,
       TBLRUJBANDAR Q,
       TBLRUJNEGERI R,
       TBLPPKPERINTAH S,
       TBLRUJBANDAR T,
  (SELECT ID_FAIL, NO_PINDAAN, TARIKH_KEMASKINI FROM (
        SELECT H.ID_FAIL, H.NO_PINDAAN, H.TARIKH_KEMASKINI FROM TBLPPKBORANG_HISTORY H
        WHERE H.ID_FAIL = $P!{idfail}
        ORDER BY H.TARIKH_KEMASKINI DESC) WHERE ROWNUM = 1)  HIS   ,
        (SELECT
      CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
      WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NULL THEN  TBLPPKSIMATI.NO_KP_LAIN
        WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAIN IS NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
         ELSE TBLPPKSIMATI.NO_KP_BARU
     END || '' ||
     CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS NOT NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
     END || '' ||
     CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS  NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAIN
     END AS NO_KP1 , ID_SIMATI
     FROM TBLPPKSIMATI ) AAA,
     (SELECT
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN  TBLPPKPEMOHON.NO_KP_LAMA
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NULL THEN  TBLPPKPEMOHON.NO_KP_LAIN
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAIN IS NULL THEN  TBLPPKPEMOHON.NO_KP_LAMA
         ELSE TBLPPKPEMOHON.NO_KP_BARU
     END || '' ||
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NOT NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN TBLPPKPEMOHON.NO_KP_LAMA
     END || '' ||
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS  NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN TBLPPKPEMOHON.NO_KP_LAIN
     END AS NO_KP2, ID_PEMOHON
     FROM TBLPPKPEMOHON ) BBB

 WHERE ((B.ID_FAIL = A.ID_FAIL)
        AND (D.ID_NEGERI = C.ID_NEGERI(+))
        AND (A.ID_NEGERIMHN = D.ID_NEGERI(+))
        AND (A.ID_DAERAHMHN = C.ID_DAERAH)
        AND (A.ID_PERMOHONAN = F.ID_PERMOHONAN)
        AND (F.ID_SIMATI = E.ID_SIMATI)
        AND (E.ID_NEGERI = G.ID_NEGERI(+))
        AND (E.ID_SIMATI = AAA.ID_SIMATI)
        AND (H.ID_PEMOHON = BBB.ID_PEMOHON)
        AND (H.ID_PEMOHON = A.ID_PEMOHON)
        AND (H.ID_BANDARSURAT = I.ID_BANDAR(+))
        AND (H.ID_NEGERISURAT = J.ID_NEGERI(+))
        AND (L.ID_KEPUTUSANPERMOHONAN = K.ID_KEPUTUSANPERMOHONAN)
        AND (A.ID_PERMOHONAN = L.ID_PERMOHONAN)
        AND (N.ID_JENISPERINTAH = 2)
        AND (N.ID_PERINTAHHAOBMST = M.ID_PERINTAHHAOBMST)
        AND (M.ID_OB = O.ID_OB(+))
        AND (O.ID_BANDARSURAT = Q.ID_BANDAR(+))
        AND (O.ID_NEGERISURAT = P.ID_NEGERI(+))
        AND (K.ID_NEGERIBICARA = R.ID_NEGERI(+))
        AND (T.ID_BANDAR(+) = E.ID_BANDAR)
        AND (K.ID_PERBICARAAN = S.ID_PERBICARAAN)
        AND (N.ID_PERINTAH = S.ID_PERINTAH)
         and a.ID_FAIL = HIS.ID_FAIL(+)
        AND (B.ID_FAIL= $P!{idfail})
        AND (S.FLAG_JENIS_KEPUTUSAN = 0)
       -- AND (K.BIL_BICARA IN (SELECT MAX(BIL_BICARA) AS BIL_BICARA FROM TBLPPKPERBICARAAN WHERE ID_KEPUTUSANPERMOHONAN = L.ID_KEPUTUSANPERMOHONAN))
       )

  UNION

  SELECT B.ID_FAIL,F.ID_PERMOHONAN,K.ID_PERBICARAAN,K.ID_KEPUTUSANPERMOHONAN,N.ID_PERINTAH, B.NO_FAIL, C.NAMA_DAERAH AS DAERAH_MOHON, D.NAMA_NEGERI AS NEGERI_MOHON,
       TO_CHAR(A.TARIKH_MOHON,'yyyy') AS TAHUN, E.NAMA_SIMATI,E.NAMA_LAIN,
       CASE
        WHEN LENGTH(AAA.NO_KP1)<12 THEN  ''||RTRIM(AAA.NO_KP1)||''
        WHEN LENGTH(RTRIM(AAA.NO_KP1))=12 THEN SUBSTR(AAA.NO_KP1,1,6) || '-' || SUBSTR(AAA.NO_KP1,7,2) || '-' || SUBSTR(AAA.NO_KP1,9,4)
       ELSE SUBSTR(AAA.NO_KP1,1,6) || '-' || SUBSTR(AAA.NO_KP1,7,2) || '-' || SUBSTR(AAA.NO_KP1,9,4)  ||' ('||TRIM(SUBSTR(AAA.NO_KP1,13,LENGTH(AAA.NO_KP1)))||')'
       END  AS KP_SIMATI,
       CASE
        WHEN E.ALAMAT_1 IS NULL THEN '-'
        WHEN E.ALAMAT_1 IS NOT NULL THEN Upper(REPLACE(e.ALAMAT_1,'&','&#38;')) || ', ' || Upper(REPLACE(e.ALAMAT_2,'&','&#38;')) || ', ' || Upper(REPLACE(e.ALAMAT_3,'&','&#38;'))||',' ||REPLACE(e.poskod,'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
    WHEN E.ALAMAT_2 IS NULL AND E.ALAMAT_3 IS NULL THEN  REPLACE(UPPER(E.ALAMAT_1),',') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_2 IS NULL THEN REPLACE(UPPER(E.ALAMAT_1),',') ||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_3 IS NULL THEN REPLACE(UPPER(E.ALAMAT_1),',') ||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        WHEN E.ALAMAT_3 IS NOT NULL THEN REPLACE(UPPER(E.ALAMAT_1),',')||', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.ALAMAT_3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(E.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(T.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(G.NAMA_NEGERI),','),'&','&#38;')
        ELSE '-'
       END AS ALAMAT_PENUH_SIMATI,
       TO_CHAR(E.TARIKH_MATI,'dd/mm/yyyy') AS TARIKH_MATI,
       REPLACE(E.NO_SIJIL_MATI,'&','&#38;') NO_SIJIL_MATI,
       H.NAMA_PEMOHON,H.NO_KP_BARU,
        CASE
         WHEN LENGTH(BBB.NO_KP2)<12 THEN  ''||RTRIM(BBB.NO_KP2)||''
         WHEN LENGTH(RTRIM(BBB.NO_KP2))=12 THEN SUBSTR(BBB.NO_KP2,1,6) || '-' || SUBSTR(BBB.NO_KP2,7,2) || '-' || SUBSTR(BBB.NO_KP2,9,4)
       ELSE SUBSTR(BBB.NO_KP2,1,6) || '-' || SUBSTR(BBB.NO_KP2,7,2) || '-' || SUBSTR(BBB.NO_KP2,9,4)  ||' ('||SUBSTR(BBB.NO_KP2,13,LENGTH(BBB.NO_KP2))||')'
       END  AS KP_PEMOHON,
        CASE
        WHEN H.ALAMAT1_SURAT IS NULL THEN '-'
        WHEN H.ALAMAT2_SURAT IS NULL AND H.ALAMAT3_SURAT IS NULL THEN  REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;') ||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;')|| ', ' || REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT2_SURAT IS NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT3_SURAT),','),'&','&#38;') || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT3_SURAT IS NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT2_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        WHEN H.ALAMAT3_SURAT IS NOT NULL THEN REPLACE(REPLACE(UPPER(H.ALAMAT1_SURAT),','),'&','&#38;')||', ' || REPLACE(REPLACE(UPPER(H.ALAMAT2_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.ALAMAT3_SURAT),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(H.POSKOD_SURAT),','),'&','&#38;')||' '||REPLACE(REPLACE(UPPER(I.KETERANGAN),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(J.NAMA_NEGERI),','),'&','&#38;')
        ELSE '-'
       END AS ALAMAT_PENUH_PEMOHON,
        TO_CHAR (S.TARIKH_PERINTAH,'dd/mm/yyyy') AS TARIKH_PERINTAH,
       TO_CHAR (S.TARIKH_PERINTAH,'dd') AS HARI_PERINTAH,
       CASE
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='01' THEN 'Januari'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='02' THEN 'Februari'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='03' THEN 'Mac'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='04' THEN 'April'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='05' THEN 'Mei'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='06' THEN 'Jun'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='07' THEN 'Julai'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='08' THEN 'Ogos'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='09' THEN 'September'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='10' THEN 'Oktober'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='11' THEN 'November'
        WHEN TO_CHAR(S.TARIKH_PERINTAH,'mm')='12' THEN 'Disember'
      END AS BULAN_PERINTAH,
       TO_CHAR(S.TARIKH_PERINTAH,'yyyy') AS TAHUN_PERINTAH,

       CASE
        WHEN K.ALAMAT_BICARA1 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA2 IS NULL AND K.ALAMAT_BICARA3 IS NULL THEN  REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' || REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA2 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '||REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA3 IS NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;') ||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;') ||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        WHEN K.ALAMAT_BICARA3 IS NOT NULL THEN REPLACE(REPLACE(UPPER(K.TEMPAT_BICARA),','),'&','&#38;') || ', ' ||REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA1),','),'&','&#38;')||', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA2),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.ALAMAT_BICARA3),','),'&','&#38;') || ', ' || REPLACE(REPLACE(UPPER(K.POSKOD),','),'&','&#38;') || ' ' ||REPLACE(REPLACE(UPPER(K.BANDAR),','),'&','&#38;')||', '|| REPLACE(REPLACE(UPPER(R.NAMA_NEGERI),','),'&','&#38;')
        ELSE 'TIADA'
       END AS ALAMAT_PENUH_BICARA,
       TO_CHAR (K.TARIKH_BICARA,'dd/mm/yyyy') AS TARIKH_BICARA,
       TO_CHAR (K.TARIKH_BICARA,'dd') AS HARI_BICARA,
       CASE
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='01' THEN 'Januari'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='02' THEN 'Februari'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='03' THEN 'Mac'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='04' THEN 'April'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='05' THEN 'Mei'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='06' THEN 'Jun'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='07' THEN 'Julai'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='08' THEN 'Ogos'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='09' THEN 'September'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='10' THEN 'Oktober'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='11' THEN 'November'
        WHEN TO_CHAR(K.TARIKH_BICARA,'mm')='12' THEN 'Disember'
       END AS BULAN_BICARA,
       TO_CHAR(K.TARIKH_BICARA,'yyyy') AS TAHUN_BICARA,
      CASE
        WHEN E.ID_BUKTIMATI = 1 THEN ', No. Sijil Mati: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 2 THEN ', Surat Sumpah Kematian: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 3 THEN ', Anggapan Kematian dari Mahkamah Tinggi: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
        WHEN E.ID_BUKTIMATI = 4 THEN ', No. Permit Kubur: '|| REPLACE(E.NO_SIJIL_MATI,'&','&#38;')
    ELSE ''
       END AS BUKTI_MATI,
       (SELECT REPLACE(TO_CHAR(JUMLAH_BAYARAN,'999,999,999.99'),' ') FROM TBLPPKBAYARAN WHERE ID_PERMOHONAN = A.ID_PERMOHONAN AND ID_JENISBAYARAN = 26) AS CUKAI_PUSAKA,
         HIS.NO_PINDAAN, TO_CHAR(HIS.TARIKH_KEMASKINI,'DD/MM/YYYY') AS TARIKH_PINDAAN
  FROM TBLPPKPERMOHONAN A,
       TBLPFDFAIL B,
       TBLRUJDAERAH C,
       TBLRUJNEGERI D,
       TBLPPKSIMATI E,
       TBLPPKPERMOHONANSIMATI F,
       TBLRUJNEGERI G,
       TBLPPKPEMOHON H,
       TBLRUJBANDAR I,
       TBLRUJNEGERI J,
       TBLPPKPERBICARAAN K,
       TBLPPKKEPUTUSANPERMOHONAN L,
       TBLPPKPERINTAHHAOBDTL M,
       TBLPPKPERINTAHHAOBMST N,
       TBLPPKOB O,
       TBLRUJNEGERI P,
       TBLRUJBANDAR Q,
       TBLRUJNEGERI R,
       TBLPPKPERINTAH S,
       TBLRUJBANDAR T,
  (SELECT ID_FAIL, NO_PINDAAN, TARIKH_KEMASKINI FROM (
        SELECT H.ID_FAIL, H.NO_PINDAAN, H.TARIKH_KEMASKINI FROM TBLPPKBORANG_HISTORY H
        WHERE H.ID_FAIL = $P!{idfail}
        ORDER BY H.TARIKH_KEMASKINI DESC) WHERE ROWNUM = 1)  HIS   ,
        (SELECT
      CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
      WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NULL THEN  TBLPPKSIMATI.NO_KP_LAIN
        WHEN TBLPPKSIMATI.NO_KP_BARU IS NULL AND TBLPPKSIMATI.NO_KP_LAIN IS NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
         ELSE TBLPPKSIMATI.NO_KP_BARU
     END || '' ||
     CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS NOT NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAMA
     END || '' ||
     CASE
         WHEN TBLPPKSIMATI.NO_KP_BARU IS  NULL AND TBLPPKSIMATI.NO_KP_LAMA IS NOT NULL THEN  TBLPPKSIMATI.NO_KP_LAIN
     END AS NO_KP1 , ID_SIMATI
     FROM TBLPPKSIMATI ) AAA,
     (SELECT
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN  TBLPPKPEMOHON.NO_KP_LAMA
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NULL THEN  TBLPPKPEMOHON.NO_KP_LAIN
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NULL AND TBLPPKPEMOHON.NO_KP_LAIN IS NULL THEN  TBLPPKPEMOHON.NO_KP_LAMA
         ELSE TBLPPKPEMOHON.NO_KP_BARU
     END || '' ||
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS NOT NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN TBLPPKPEMOHON.NO_KP_LAMA
     END || '' ||
     CASE
         WHEN TBLPPKPEMOHON.NO_KP_BARU IS  NULL AND TBLPPKPEMOHON.NO_KP_LAMA IS NOT NULL THEN TBLPPKPEMOHON.NO_KP_LAIN
     END AS NO_KP2, ID_PEMOHON
     FROM TBLPPKPEMOHON ) BBB

 WHERE ((B.ID_FAIL = A.ID_FAIL)
        AND (D.ID_NEGERI = C.ID_NEGERI(+))
        AND (A.ID_NEGERIMHN = D.ID_NEGERI(+))
        AND (A.ID_DAERAHMHN = C.ID_DAERAH)
        AND (A.ID_PERMOHONAN = F.ID_PERMOHONAN)
        AND (F.ID_SIMATI = E.ID_SIMATI)
        AND (E.ID_NEGERI = G.ID_NEGERI(+))
        AND (E.ID_SIMATI = AAA.ID_SIMATI)
        AND (H.ID_PEMOHON = BBB.ID_PEMOHON)
        AND (H.ID_PEMOHON = A.ID_PEMOHON)
        AND (H.ID_BANDARSURAT = I.ID_BANDAR(+))
        AND (H.ID_NEGERISURAT = J.ID_NEGERI(+))
        AND (L.ID_KEPUTUSANPERMOHONAN = K.ID_KEPUTUSANPERMOHONAN)
        AND (A.ID_PERMOHONAN = L.ID_PERMOHONAN)
        AND (N.ID_JENISPERINTAH = 1)
        AND (M.STATUS_TADBIR = 'Y')
        AND (N.ID_PERINTAHHAOBMST = M.ID_PERINTAHHAOBMST)
        AND (M.ID_OB = O.ID_OB(+))
        AND (O.ID_BANDARSURAT = Q.ID_BANDAR(+))
        AND (O.ID_NEGERISURAT = P.ID_NEGERI(+))
        AND (K.ID_NEGERIBICARA = R.ID_NEGERI(+))
        AND (T.ID_BANDAR(+) = E.ID_BANDAR)
        AND (K.ID_PERBICARAAN = S.ID_PERBICARAAN)
        AND (N.ID_PERINTAH = S.ID_PERINTAH)
         and a.ID_FAIL = HIS.ID_FAIL(+)
        AND (B.ID_FAIL= $P!{idfail})
        AND (S.FLAG_JENIS_KEPUTUSAN = 0)
       -- AND (K.BIL_BICARA IN (SELECT MAX(BIL_BICARA) AS BIL_BICARA FROM TBLPPKPERBICARAAN WHERE ID_KEPUTUSANPERMOHONAN = L.ID_KEPUTUSANPERMOHONAN))

       )]]></queryString>

	<field name="ID_FAIL" class="java.lang.String"/>
	<field name="ID_PERMOHONAN" class="java.lang.String"/>
	<field name="ID_PERBICARAAN" class="java.lang.String"/>
	<field name="ID_KEPUTUSANPERMOHONAN" class="java.lang.String"/>
	<field name="ID_PERINTAH" class="java.lang.String"/>
	<field name="NO_FAIL" class="java.lang.String"/>
	<field name="DAERAH_MOHON" class="java.lang.String"/>
	<field name="NEGERI_MOHON" class="java.lang.String"/>
	<field name="TAHUN" class="java.lang.String"/>
	<field name="NAMA_SIMATI" class="java.lang.String"/>
	<field name="NAMA_LAIN" class="java.lang.String"/>
	<field name="KP_SIMATI" class="java.lang.String"/>
	<field name="ALAMAT_PENUH_SIMATI" class="java.lang.String"/>
	<field name="TARIKH_MATI" class="java.lang.String"/>
	<field name="NO_SIJIL_MATI" class="java.lang.String"/>
	<field name="NAMA_PEMOHON" class="java.lang.String"/>
	<field name="NO_KP_BARU" class="java.lang.String"/>
	<field name="KP_PEMOHON" class="java.lang.String"/>
	<field name="ALAMAT_PENUH_PEMOHON" class="java.lang.String"/>
	<field name="TARIKH_PERINTAH" class="java.lang.String"/>
	<field name="HARI_PERINTAH" class="java.lang.String"/>
	<field name="BULAN_PERINTAH" class="java.lang.String"/>
	<field name="TAHUN_PERINTAH" class="java.lang.String"/>
	<field name="ALAMAT_PENUH_BICARA" class="java.lang.String"/>
	<field name="TARIKH_BICARA" class="java.lang.String"/>
	<field name="HARI_BICARA" class="java.lang.String"/>
	<field name="BULAN_BICARA" class="java.lang.String"/>
	<field name="TAHUN_BICARA" class="java.lang.String"/>
	<field name="BUKTI_MATI" class="java.lang.String"/>
	<field name="CUKAI_PUSAKA" class="java.lang.String"/>
	<field name="NO_PINDAAN" class="java.lang.String"/>
	<field name="TARIKH_PINDAAN" class="java.lang.String"/>

		<background>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</background>
		<title>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</title>
		<pageHeader>
			<band height="21"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="382"
						y="3"
						width="108"
						height="10"
						key="textField-17"
						positionType="Float"
						isPrintRepeatedValues="false"
						isPrintInFirstWholeBand="true"
						isPrintWhenDetailOverflows="true">
							<printWhenExpression><![CDATA[new Boolean($P{statusFail}.equals("Y")?true:false)]]></printWhenExpression>
						</reportElement>
					<box></box>
					<textElement textAlignment="Right" verticalAlignment="Top" rotation="None">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" size="24" isBold="true" isPdfEmbedded ="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["DRAF"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="3"
						y="2"
						width="206"
						height="18"
						key="textField-18"
						positionType="Float"
						isPrintRepeatedValues="false"
						isPrintInFirstWholeBand="true"
						isPrintWhenDetailOverflows="true">
							<printWhenExpression><![CDATA[new Boolean($P{flag_keb_kemaskini}.equals("Y")?true:false)]]></printWhenExpression>
						</reportElement>
					<box></box>
					<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
						<font fontName="Times New Roman" pdfFontName="Courier-Bold" size="7" isBold="true" isPdfEmbedded ="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Pembetulan/pindaan ke atas perintah ini telah dibuat bagi Daerah " +$F{DAERAH_MOHON}+
".\nNo Daftar "+$F{NO_PINDAAN}+" bertarikh "+$F{TARIKH_PINDAAN}]]></textFieldExpression>
				</textField>
			</band>
		</pageHeader>
		<columnHeader>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</columnHeader>
		<detail>
			<band height="271"  isSplitAllowed="false" >
				<textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="97"
						y="3"
						width="395"
						height="11"
						key="textField-14"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Right" verticalAlignment="Top" markup="styled">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" size="9" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[($F{NO_FAIL}!= null ? $F{NO_FAIL}:"TIADA")]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" pattern="dd/MM/yyyy" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="42"
						y="43"
						width="450"
						height="23"
						key="textField-2"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Justified" markup="styled">
						<font fontName="Verdana" size="9"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Dalam hal Harta pusaka  <style isBold='true' pdfFontName='Helvetica-Bold'>" + ($F{NAMA_LAIN}!= null ? $F{NAMA_SIMATI}+" @ "+$F{NAMA_LAIN}:$F{NAMA_SIMATI}) +  ", No KP: "  + ($F{KP_SIMATI} != null ? $F{KP_SIMATI}:"TIADA") +  ", Tarikh Mati: "+ ($F{TARIKH_MATI} != null ? $F{TARIKH_MATI}:"TIADA")+($F{BUKTI_MATI}!=null?$F{BUKTI_MATI}:"")+".</style>"
+"\n\nPetisyen daripada  <style isBold='true' pdfFontName='Helvetica-Bold'>" + ($F{NAMA_PEMOHON}!= null ? $F{NAMA_PEMOHON}:"TIADA")+($F{NO_KP_BARU}!= null ?  ", No. KP: "+ $F{KP_PEMOHON}:" ")+"</style> yang beralamat di <style isBold='true' pdfFontName='Helvetica-Bold'>" +($F{ALAMAT_PENUH_PEMOHON}!= null ? $F{ALAMAT_PENUH_PEMOHON}:"-")+".</style>"
+"\n\n                                  <style isBold='true' pdfFontName='Helvetica-Bold'>PEMBERIAN SURAT KUASA MENTADBIR DI BAWAH SEKSYEN 13</style>"
+"\n\nSAYA <style isBold='true' pdfFontName='Helvetica-Bold'>"+($P{namaPegawai}!= null ? $P{namaPegawai}:"TIADA")+ " - " +($P{jawatan}!= null ? $P{jawatan}:"TIADA")+"</style> <style isBold='true' pdfFontName='Helvetica-Bold'>" +($F{DAERAH_MOHON}!= null ? $F{DAERAH_MOHON}:"TIADA")+"</style> dengan ini memaklumkan bahawa pada <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{HARI_BICARA}!= null ? $F{HARI_BICARA}:"TIADA")+"</style> haribulan <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{BULAN_BICARA}!= null ? $F{BULAN_BICARA}:"TIADA")+" "+($F{TAHUN_BICARA}!= null ? $F{TAHUN_BICARA}:"")+"</style>, Surat Kuasa Mentadbir harta pusaka dan barang kepunyaan <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{NAMA_SIMATI}!= null ?$F{NAMA_SIMATI}:"TIADA")+"</style> si mati yang dahulunya beralamat di <style isBold='true' pdfFontName='Helvetica-Bold'>" +($F{ALAMAT_PENUH_SIMATI}!= null ?$F{ALAMAT_PENUH_SIMATI}:"-")+"</style> telah diberikan kepada "
+"\n<style isBold='true' pdfFontName='Helvetica-Bold'>"+$P{namaPentadbir} + "</style> setelah dia mengaku janji untuk mentadbirkan harta pusaka dan barang itu, dan membuat suatu inventori lengkap dan benar tentang harta pusaka dan barang tersebut dan mempamerkan inventori itu kepada <style isBold='true' pdfFontName='Helvetica-Bold'>* PENTADBIR TANAH </style> bagi Daerah itu dalam tempoh enam bulan daripada tarikh pemberian ini atau dalam tempoh lanjutan sebagaimana yang <style isBold='true' pdfFontName='Helvetica-Bold'>* PENTADBIR TANAH </style> boleh ditetapkan dari semasa ke semasa dan juga memberikan kepada <style isBold='true' pdfFontName='Helvetica-Bold'>* PENTADBIR TANAH </style> suatu akaun sebenar mengenai harta pusaka dan barang tersebut dalam tempoh satu tahun daripada tarikh yang sama atau dalam tempoh lanjutan sebagaimana yang <style isBold='true' pdfFontName='Helvetica-Bold'>* PENTADBIR TANAH </style> boleh ditetapkan dari semasa ke semasa."
+"\n\n"+"**Pemberian ini adalah tertakluk kepada pengehadan yang berikut :-"
+"\n\n"+"                   Ia adalah terhad di bawah seksyen 13  Akta Harta Pusaka Kecil (Pembahagian) 1955, kepada pemungutan dan pemeliharaan harta simati dan memberi pelepasan bagi hutang harta pusakanya yang kena dibayar, tertakluk kepada arahan <style isBold='true' pdfFontName='Helvetica-Bold'>* PENTADBIR TANAH.</style>"
+"\n\n"+"Suatu jadual harta si mati adalah seperti dilampirkan di mukasurat sebelah."
+"\n\n"+"Diberikan di bawah tandatangan dan meterai saya di <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{ALAMAT_PENUH_BICARA}!= null ? $F{ALAMAT_PENUH_BICARA}:"TIADA")+".</style> "
+"\n"+"Pada <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{HARI_PERINTAH}!= null ? $F{HARI_PERINTAH}:"TIADA")+"</style> haribulan <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{BULAN_PERINTAH}!= null ? $F{BULAN_PERINTAH}:"TIADA")+" "+($F{TAHUN_PERINTAH}!= null ? $F{TAHUN_PERINTAH}:"")+".</style>"]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement
						x="42"
						y="120"
						width="458"
						height="15"
						key="staticText-11"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Justified" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[__________________________________________________________________________________]]></text>
				</staticText>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="44"
						y="136"
						width="460"
						height="17"
						key="textField-8"
						positionType="Float"/>
					<box></box>
					<textElement>
						<font fontName="Verdana" size="6"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["*    Masukkan Pentadbir Tanah Daerah / Pemungut / Pegawai Daerah / Pegawai Pentadbir Sarawak, mengikut kehendak keadaan."+"\n"+"**  Hendaklah dipotong jika perintah itu adalah untuk pentadbiran yang dihadkan di bawah Seksyen 13 (4) Akta itu."]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement
						x="42"
						y="180"
						width="450"
						height="11"
						key="staticText-12"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Center">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" size="9" isBold="true"/>
					</textElement>
				<text><![CDATA[JADUAL HARTA SIMATI YANG DINAMAKAN DI ATAS]]></text>
				</staticText>
				<subreport  isUsingCache="true">
					<reportElement
						x="42"
						y="195"
						width="450"
						height="14"
						key="subreport-1"
						positionType="Float"/>
					<subreportParameter  name="idfail">
						<subreportParameterExpression><![CDATA[$P{idfail}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="ReportDir">
						<subreportParameterExpression><![CDATA[$P{ReportDir}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="namaPegawai">
						<subreportParameterExpression><![CDATA[$P{namaPegawai}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="jawatan">
						<subreportParameterExpression><![CDATA[$P{jawatan}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="daerahMohon">
						<subreportParameterExpression><![CDATA[$P{daerahMohon}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="idOB">
						<subreportParameterExpression><![CDATA[$P{idOB}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="idPermohonan">
						<subreportParameterExpression><![CDATA[$P{idPermohonan}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="namaPentadbir">
						<subreportParameterExpression><![CDATA[$P{namaPentadbir}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="flagLampiran">
						<subreportParameterExpression><![CDATA[$P{flagLampiran}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="statusFail">
						<subreportParameterExpression><![CDATA[$P{statusFail}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="flag_keb_kemaskini">
						<subreportParameterExpression><![CDATA[$P{flag_keb_kemaskini}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="NILAI_BERSIH_1">
						<subreportParameterExpression><![CDATA[$P{NILAI_BERSIH_1}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="NILAI_BERSIH_2">
						<subreportParameterExpression><![CDATA[$P{NILAI_BERSIH_2}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression  class="java.lang.String"><![CDATA[$P{ReportDir} + "//ppk//BorangF2_subreportJadualHarta.jasper"]]></subreportExpression>
				</subreport>
				<subreport  isUsingCache="true">
					<reportElement
						x="42"
						y="232"
						width="450"
						height="14"
						key="subreport-3"
						positionType="Float"/>
					<subreportParameter  name="BULAN_PERINTAH">
						<subreportParameterExpression><![CDATA[$F{BULAN_PERINTAH}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="TAHUN_PERINTAH">
						<subreportParameterExpression><![CDATA[$F{TAHUN_PERINTAH}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="ReportDir">
						<subreportParameterExpression><![CDATA[$P{ReportDir}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="jawatan">
						<subreportParameterExpression><![CDATA[$P{jawatan}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="idPermohonan">
						<subreportParameterExpression><![CDATA[""+$F{ID_PERMOHONAN}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="namaPegawai">
						<subreportParameterExpression><![CDATA[$P{namaPegawai}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="nofail">
						<subreportParameterExpression><![CDATA[$P{idfail}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="HARI_PERINTAH">
						<subreportParameterExpression><![CDATA[$F{HARI_PERINTAH}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="daerahMohon">
						<subreportParameterExpression><![CDATA[$P{daerahMohon}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="CUKAI_PUSAKA">
						<subreportParameterExpression><![CDATA[$F{CUKAI_PUSAKA}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression  class="java.lang.String"><![CDATA[$P{ReportDir} + "//ppk//BorangF2_subreportRekodPendaftaran.jasper"]]></subreportExpression>
				</subreport>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="42"
						y="16"
						width="450"
						height="19"
						key="textField-13"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Center" verticalAlignment="Middle" markup="styled">
						<font fontName="Verdana" pdfFontName="Helvetica" size="9" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["<style isBold='true' pdfFontName='Helvetica-Bold'>"+"BORANG F"+"</style>"
+"\n(Peraturan 7(2))"
+"\n<style isBold='true' pdfFontName='Helvetica-Bold'>"+"MALAYSIA"+"</style>"
+"\n\nNegeri <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{NEGERI_MOHON}!= null ? $F{NEGERI_MOHON}:"TIADA")+"</style>"
+"\nDaerah <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{DAERAH_MOHON}!= null ? $F{DAERAH_MOHON}:"TIADA")+"</style>"
+"\n\n<style isBold='true' pdfFontName='Helvetica-Bold'>"+"AKTA HARTA PUSAKA KECIL (PEMBAHAGIAN), 1955"+"</style>"
+"\nGUAMAN PEMBAHAGIAN NO. <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{NO_FAIL}!= null ? $F{NO_FAIL}:"TIADA")+"</style> TAHUN <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{TAHUN}!= null ? $F{TAHUN}:"TIADA")+"</style>"
+"\n"]]></textFieldExpression>
				</textField>
				<break>
					<reportElement
						x="0"
						y="164"
						width="535"
						height="0"
						key="element-2"/>
				</break>
				<break>
					<reportElement
						x="0"
						y="247"
						width="535"
						height="0"
						key="element-3">
							<printWhenExpression><![CDATA[$P{flagLampiran}]]></printWhenExpression>
						</reportElement>
				</break>
				<subreport  isUsingCache="true">
					<reportElement
						x="42"
						y="257"
						width="450"
						height="14"
						key="subreport-4"
						positionType="Float">
							<printWhenExpression><![CDATA[$P{flagLampiran}]]></printWhenExpression>
						</reportElement>
					<subreportParameter  name="idPerintah">
						<subreportParameterExpression><![CDATA[""+$F{ID_PERINTAH}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression  class="java.lang.String"><![CDATA[$P{ReportDir} + "//ppk//BorangF_LampiranWaris.jasper"]]></subreportExpression>
				</subreport>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="97"
						y="165"
						width="395"
						height="11"
						key="textField-16"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Right" verticalAlignment="Top" markup="styled">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" size="9" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[($F{NO_FAIL}!= null ? $F{NO_FAIL}:"TIADA")]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="97"
						y="250"
						width="395"
						height="11"
						key="textField-15"
						positionType="Float">
							<printWhenExpression><![CDATA[$P{flagLampiran}]]></printWhenExpression>
						</reportElement>
					<box></box>
					<textElement textAlignment="Right" verticalAlignment="Top" markup="styled">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" size="9" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[($F{NO_FAIL}!= null ? $F{NO_FAIL}:"TIADA")]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="284"
						y="79"
						width="50"
						height="8"
						key="textField-19"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Right" markup="styled">
						<font fontName="Verdana" pdfFontName="Helvetica" size="9" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["TM "]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="348"
						y="76"
						width="161"
						height="8"
						key="textField-20"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Left" markup="styled">
						<font fontName="Verdana" pdfFontName="Helvetica" size="9" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["..........................................................."
+"\nPENTADBIR TANAH / <style isStrikeThrough ='true'>PEMUNGUT/</style>"
+"\n<style isStrikeThrough ='true'>PEGAWAI DAERAH / PEGAWAI</style>"
+"\n<style isStrikeThrough ='true'>PENTADBIR SARAWAK</style>"]]></textFieldExpression>
				</textField>
			</band>
		</detail>
		<columnFooter>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</columnFooter>
		<pageFooter>
			<band height="20"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="209"
						y="1"
						width="89"
						height="18"
						key="textField-11"
						positionType="Float"
						isPrintInFirstWholeBand="true"/>
					<box></box>
					<textElement textAlignment="Right">
						<font fontName="Verdana" size="9"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[" Mukasurat " + $V{PAGE_NUMBER} + " dari "]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Report" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="299"
						y="1"
						width="23"
						height="18"
						key="textField-12"
						positionType="Float"
						isPrintInFirstWholeBand="true"/>
					<box></box>
					<textElement textAlignment="Left">
						<font fontName="Verdana" size="9"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[" "+$V{PAGE_NUMBER}+""]]></textFieldExpression>
				</textField>
			</band>
		</pageFooter>
		<summary>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</summary>
		<noData>
			<band height="40"  isSplitAllowed="true" >
				<staticText>
					<reportElement
						x="0"
						y="-1"
						width="535"
						height="20"
						key="staticText-18"/>
					<box></box>
					<textElement textAlignment="Center">
						<font pdfFontName="Helvetica-BoldOblique" isBold="true" isItalic="true"/>
					</textElement>
				<text><![CDATA[TIADA REKOD BAGI BORANG INI.]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="0"
						y="19"
						width="535"
						height="20"
						key="staticText-19"/>
					<box></box>
					<textElement textAlignment="Center">
						<font pdfFontName="Helvetica-BoldOblique" isBold="true" isItalic="true"/>
					</textElement>
				<text><![CDATA[BORANG TIDAK DAPAT DIJANA.]]></text>
				</staticText>
			</band>
		</noData>
</jasperReport>
