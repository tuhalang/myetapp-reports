<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="HTPajakanSuratJKPTGNegeri" pageWidth="595" pageHeight="842" columnWidth="537" leftMargin="29" rightMargin="29" topMargin="20" bottomMargin="20" uuid="c6a04bb6-40dc-4c76-8952-cb9738a5a2ef">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="idpermohonan" class="java.lang.String"/>
	<parameter name="namaPegawai" class="java.lang.String"/>
	<parameter name="NO_TELEFON" class="java.lang.String"/>
	<parameter name="jawatanPegawai" class="java.lang.String" isForPrompting="false"/>
	<parameter name="emelPegawai" class="java.lang.String"/>
	<parameter name="ReportDir" class="java.lang.String"/>
	<parameter name="BaseDir" class="java.lang.String"/>
	<parameter name="UP" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT   PP.NO_RUJUKAN_LAIN, A.NO_FAIL,PRN.ID_NEGERI
    ,TO_CHAR(SYSDATE, 'DD') AS HARI_SURAT,
        CASE
           WHEN TO_CHAR (SYSDATE, 'MM') = '01' THEN 'Januari'
           WHEN TO_CHAR (SYSDATE, 'MM') = '02' THEN 'Februari'
           WHEN TO_CHAR (SYSDATE, 'MM') = '03' THEN 'Mac'
           WHEN TO_CHAR (SYSDATE, 'MM') = '04' THEN 'April'
           WHEN TO_CHAR (SYSDATE, 'MM') = '05' THEN 'Mei'
           WHEN TO_CHAR (SYSDATE, 'MM') = '06' THEN 'Jun'
           WHEN TO_CHAR (SYSDATE, 'MM') = '07' THEN 'Julai'
           WHEN TO_CHAR (SYSDATE, 'MM') = '08' THEN 'Ogos'
           WHEN TO_CHAR (SYSDATE, 'MM') = '09' THEN 'September'
           WHEN TO_CHAR (SYSDATE, 'MM') = '10' THEN 'Oktober'
           WHEN TO_CHAR (SYSDATE, 'MM') = '11' THEN 'November'
           WHEN TO_CHAR (SYSDATE, 'MM') = '12' THEN 'Disember'
           ELSE 'TIADA'
        END AS BULAN_SURAT, TO_CHAR(SYSDATE, 'YYYY') AS TAHUN_SURAT, TO_CHAR(SYSDATE,'DD','NLS_CALENDAR=''ENGLISH HIJRAH''') AS HARI_ISLAM,
        CASE
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 01 THEN 'Muharam'
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 02 THEN 'Safar'
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 03 THEN 'Rabiulawal'
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 04 THEN 'Rabiulakhir'
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 05 THEN 'Jamadilawal'
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 06 THEN 'Jamadilakhir'
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 07 THEN 'Rejab'
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 08 THEN 'Syaaban'
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 09 THEN 'Ramadhan'
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 10 THEN 'Syawal'
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 11 THEN 'Zulkaedah'
            WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 12 THEN 'Zulhijjah'
        END AS BULAN_ISLAM, TO_CHAR(SYSDATE,'RRRR','NLS_CALENDAR=''ENGLISH HIJRAH''') AS TAHUN_ISLAM
,INITCAP(PM.NAMA_PEJABAT) AS NAMA_PEMOHON
,PM. POSKOD, INITCAP(BDR.KETERANGAN) AS NAMA_BANDAR
,CASE
    WHEN A.ID_NEGERI IN (14,15,16)
        THEN GETNEGERIWILAYAH(PRN.ID_NEGERI)
    ELSE
        PRN.NAMA_NEGERI
END NAMA_NEGERI
,INITCAP(PRN.NAMA_NEGERI) NAMA_NEGERI_ASAL
,REPLACE(REPLACE(A.TAJUK_FAIL,'&','&#38;'),'@','&#64;') AS TAJUK_FAIL
,REPLACE(REPLACE(INITCAP(A.TAJUK_FAIL),'&','&#38;'),'@','&#64;') AS TAJUK_BWH
,INITCAP (REPLACE(REPLACE(PM.ALAMAT1,'&','&#38;'),'@','&#64;')) AS ALAMAT_PEMOHON1
,INITCAP (REPLACE(REPLACE(PM.ALAMAT2,'&','&#38;'),'@','&#64;')) AS ALAMAT_PEMOHON2
,INITCAP (REPLACE(REPLACE(PM.ALAMAT3,'&','&#38;'),'@','&#64;')) AS ALAMAT_PEMOHON3
FROM TBLPFDFAIL A,
         TBLPERMOHONAN B,
         TBLHTPPERMOHONAN PP,
         --TBLHTPPEMOHON PM,
         TBLRUJPEJABATJKPTG PM,
         TBLRUJBANDAR BDR,
         TBLRUJNEGERI PRN
WHERE B.ID_FAIL = A.ID_FAIL
     AND B.ID_PERMOHONAN = PP.ID_PERMOHONAN
     AND (A.ID_STATUS <> 999 OR A.ID_STATUS IS NULL)
     --AND B.ID_PERMOHONAN = PM.ID_PERMOHONAN(+)
     AND A.ID_NEGERI = PM.ID_NEGERI
     AND A.ID_SEKSYEN = PM.ID_SEKSYEN
     AND PM.ID_BANDAR = BDR.ID_BANDAR(+)
     AND PM.ID_NEGERI = PRN.ID_NEGERI(+)
     AND B.ID_PERMOHONAN = $P{idpermohonan}]]>
	</queryString>
	<field name="NO_RUJUKAN_LAIN" class="java.lang.String"/>
	<field name="NO_FAIL" class="java.lang.String"/>
	<field name="ID_NEGERI" class="java.math.BigDecimal"/>
	<field name="HARI_SURAT" class="java.lang.String"/>
	<field name="BULAN_SURAT" class="java.lang.String"/>
	<field name="TAHUN_SURAT" class="java.lang.String"/>
	<field name="HARI_ISLAM" class="java.lang.String"/>
	<field name="BULAN_ISLAM" class="java.lang.String"/>
	<field name="TAHUN_ISLAM" class="java.lang.String"/>
	<field name="NAMA_PEMOHON" class="java.lang.String"/>
	<field name="POSKOD" class="java.lang.String"/>
	<field name="NAMA_BANDAR" class="java.lang.String"/>
	<field name="NAMA_NEGERI" class="java.lang.String"/>
	<field name="NAMA_NEGERI_ASAL" class="java.lang.String"/>
	<field name="TAJUK_FAIL" class="java.lang.String"/>
	<field name="TAJUK_BWH" class="java.lang.String"/>
	<field name="ALAMAT_PEMOHON1" class="java.lang.String"/>
	<field name="ALAMAT_PEMOHON2" class="java.lang.String"/>
	<field name="ALAMAT_PEMOHON3" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="245" splitType="Stretch">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement uuid="01c89758-5ea6-43a1-aab0-e2650c25dcad" key="textField-19" positionType="Float" x="50" y="60" width="435" height="15"/>
				<textElement textAlignment="Left" verticalAlignment="Middle" markup="styled">
					<font fontName="Bookman Old Style" size="11" isBold="false" pdfFontName="Helvetica"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Pengarah,\n"
+($F{NAMA_PEMOHON}!=null?$F{NAMA_PEMOHON}+"\n":"")
+"Cawangan "+($F{NAMA_NEGERI_ASAL}!=null?$F{NAMA_NEGERI_ASAL}+"\n":"")
+($F{ALAMAT_PEMOHON1}!=null?$F{ALAMAT_PEMOHON1}+"\n":"")
+($F{ALAMAT_PEMOHON2}!=null?$F{ALAMAT_PEMOHON2}+"\n":"")
+($F{ALAMAT_PEMOHON3}!=null?$F{ALAMAT_PEMOHON3}+"\n":"")
+"<style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{POSKOD}!=null?$F{POSKOD}+" ":"")
+($F{NAMA_NEGERI}!=null?$F{NAMA_NEGERI}.toUpperCase():"")+"</style>"
+(!$P{UP}.equals("TIADA")? "\n(U/P. "+$P{UP}+")":"")]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement uuid="87ebc5ea-661a-4147-bf77-68d947fcde6a" key="textField-58" positionType="Float" x="50" y="75" width="435" height="15"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle" markup="styled">
					<font fontName="Bookman Old Style" size="11" isBold="false" pdfFontName="Helvetica"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["\nTuan,"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement uuid="7599ea45-a118-4522-861c-abcb6a41d3df" key="textField-59" positionType="Float" x="50" y="120" width="435" height="15"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle" markup="styled">
					<font fontName="Bookman Old Style" size="11" isBold="false" pdfFontName="Helvetica"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Dengan hormatnya saya merujuk kepada perkara di atas."]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement uuid="83dcb4c6-7d05-4d1c-995b-ec747a62422d" key="textField-61" positionType="Float" x="50" y="165" width="435" height="15"/>
				<textElement textAlignment="Left" verticalAlignment="Middle" markup="styled">
					<font fontName="Bookman Old Style" size="11" isBold="false" pdfFontName="Helvetica"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["\nSekian,terima kasih.\n"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement uuid="8b7a7081-6f1d-4880-81eb-04adf7f7b1cf" key="textField-63" positionType="Float" x="50" y="90" width="435" height="11"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle" markup="styled">
					<font fontName="Bookman Old Style" size="11" isBold="true" pdfFontName="Helvetica-Bold"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["\n<style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{TAJUK_FAIL}!=null?$F{TAJUK_FAIL}.toUpperCase():"")+"</style>\n"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement uuid="7920b909-b5e1-4342-94a5-757c8007ca74" key="textField-66" positionType="Float" x="50" y="135" width="435" height="15"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle" markup="styled">
					<font fontName="Bookman Old Style" size="11" isBold="false" pdfFontName="Helvetica"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["\n2.\t  Sukacita dimaklumkan bahawa Jabatan ini telah menerima "
+($F{TAJUK_BWH}!=null?$F{TAJUK_BWH}:"")+"."
+" Oleh itu, sukacita dipohon kerjasama tuan untuk membuat"
+" <style isBold='true' pdfFontName='Helvetica-Bold'>laporan tanah</style>"
+" dan mendapatkan"
+" <style isBold='true' pdfFontName='Helvetica-Bold'>sijil carian rasmi</style>"
+" bagi tanah tersebut ke Seksyen ini."]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement uuid="8d40c9dd-9e83-42f4-bc36-eb3a9078a1e6" key="textField-67" positionType="Float" x="235" y="38" width="93" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="Bookman Old Style" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA["Tarikh "]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement uuid="3df8bca7-9f36-48d1-8936-e14e0fc585d4" key="textField-68" positionType="Float" x="328" y="38" width="14" height="15"/>
				<textElement textAlignment="Center">
					<font fontName="Bookman Old Style" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[":"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="dd/MM/yyyy" isBlankWhenNull="false">
				<reportElement uuid="e9cc60c7-e7d4-445e-b85e-38de96500a93" key="textField-69" positionType="Float" x="342" y="38" width="150" height="15"/>
				<textElement textAlignment="Left">
					<font fontName="Bookman Old Style" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{HARI_SURAT}!=null?$F{HARI_SURAT}:"")+" "+($F{BULAN_SURAT}!=null?$F{BULAN_SURAT}:"")+" "+($F{TAHUN_SURAT}!=null?$F{TAHUN_SURAT}:"")]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement uuid="af7295b4-9754-4ebc-8687-27c8db433d68" key="textField-70" positionType="Float" x="235" y="23" width="93" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="Bookman Old Style" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA["Rujukan Kami "]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement uuid="44d1822d-aa20-431c-bdd0-4bcca0f5d0cb" key="textField-71" positionType="Float" x="328" y="23" width="14" height="15"/>
				<textElement textAlignment="Center">
					<font fontName="Bookman Old Style" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[":"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement uuid="67957252-15a0-440c-9f97-5ad03b221ca9" key="textField-72" positionType="Float" x="342" y="23" width="190" height="15"/>
				<textElement textAlignment="Left">
					<font fontName="Bookman Old Style" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{NO_FAIL} != null ? $F{NO_FAIL}:"")]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement uuid="e64b20d9-0381-4473-9000-72f97a0750de" key="textField-73" positionType="Float" x="235" y="8" width="93" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="Bookman Old Style" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA["Rujukan Tuan "]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement uuid="4e2f8a3c-7134-4e2a-837c-7bb1ac2f0d51" key="textField-74" positionType="Float" x="328" y="8" width="14" height="15"/>
				<textElement textAlignment="Center">
					<font fontName="Bookman Old Style" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[":"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement uuid="8747a175-3d74-4755-ab62-d0477f4d7ca5" key="textField-75" positionType="Float" x="342" y="8" width="190" height="15"/>
				<textElement textAlignment="Left">
					<font fontName="Bookman Old Style" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{NO_RUJUKAN_LAIN} != null ? $F{NO_RUJUKAN_LAIN}:"")]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement uuid="0ea594ff-60b7-4de6-a874-c14e26b9b812" key="textField-76" positionType="Float" x="0" y="5" width="537" height="1"/>
				<textElement textAlignment="Right">
					<font fontName="Bookman Old Style" size="10"/>
				</textElement>
				<textFieldExpression><![CDATA["\n\n\n"]]></textFieldExpression>
			</textField>
			<subreport isUsingCache="true">
				<reportElement uuid="c05a105b-7699-44ea-b3d8-94dc0d04f190" key="subreport-1" positionType="Float" x="50" y="180" width="435" height="15"/>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{ReportDir} + "//htp//HTPFooterBerkhidmat.jasper"]]></subreportExpression>
			</subreport>
			<subreport isUsingCache="true">
				<reportElement uuid="2727c40a-b2be-4bb5-b69a-c39b7e9f796d" key="subreport-2" positionType="Float" x="50" y="230" width="435" height="15"/>
				<subreportParameter name="emelPegawai">
					<subreportParameterExpression><![CDATA[$P{emelPegawai}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="NO_TELEFON">
					<subreportParameterExpression><![CDATA[$P{NO_TELEFON}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="ReportDir">
					<subreportParameterExpression><![CDATA[$P{ReportDir}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="namaPegawai">
					<subreportParameterExpression><![CDATA[$P{namaPegawai}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="idpermohonan">
					<subreportParameterExpression><![CDATA[$P{idpermohonan}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{ReportDir} + "//htp//HTPRujukanSuratNPegawaiXJKPTG.jasper"]]></subreportExpression>
			</subreport>
			<line>
				<reportElement uuid="7736549e-d193-487c-8aed-01a07ad8ae22" key="line-1" positionType="Float" mode="Opaque" x="50" y="101" width="435" height="1"/>
			</line>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement uuid="455fb31e-1950-458d-8385-e1ce4f27e2ad" key="textField-77" positionType="Float" x="50" y="150" width="435" height="15"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle" markup="styled">
					<font fontName="Bookman Old Style" size="11" isBold="false" pdfFontName="Helvetica"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["\n3.\t  Bersama-sama ini dikemukakan "
+" <style isBold='true' pdfFontName='Helvetica-Bold'>salinan hakmilik</style>"
+" dan"
+" <style isBold='true' pdfFontName='Helvetica-Bold'>salinan pelan tapak</style>"
+" untuk tindakan tuan selanjutnya."]]></textFieldExpression>
			</textField>
			<subreport isUsingCache="true">
				<reportElement uuid="d0d0d508-37dd-4e5f-a0ed-270cdc097872" key="subreport-3" positionType="Float" x="50" y="210" width="435" height="15"/>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{ReportDir} + "//htp//HTPFooterSaya.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band splitType="Stretch"/>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
