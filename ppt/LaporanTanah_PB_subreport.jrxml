<?xml version="1.0" encoding="UTF-8"  ?>
<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport
		 name="LaporanTanah_PB_subreport"
		 columnCount="1"
		 printOrder="Vertical"
		 orientation="Portrait"
		 pageWidth="451"
		 pageHeight="842"
		 columnWidth="451"
		 columnSpacing="0"
		 leftMargin="0"
		 rightMargin="0"
		 topMargin="0"
		 bottomMargin="0"
		 whenNoDataType="NoPages"
		 isTitleNewPage="false"
		 isSummaryNewPage="false">
	<property name="ireport.scriptlethandling" value="0" />
	<property name="ireport.encoding" value="UTF-8" />
	<import value="java.util.*" />
	<import value="net.sf.jasperreports.engine.*" />
	<import value="net.sf.jasperreports.engine.data.*" />

	<parameter name="id_tanah" isForPrompting="true" class="java.lang.String"/>
	<parameter name="nama_pegawai" isForPrompting="true" class="java.lang.String"/>
	<queryString><![CDATA[SELECT DISTINCT
A.NO_FAIL,E.NAMA_NEGERI,INITCAP(B.TUJUAN) AS TUJUAN,D.NO_LOT,F.KOD_JENIS_HAKMILIK,D.NO_HAKMILIK,INITCAP(G.NAMA_MUKIM) AS NAMA_MUKIM,
TO_CHAR(D.LUAS_LOT) AS LUAS_AMBIL, NVL(INITCAP(H.KETERANGAN),'') AS UNIT_LUAS_1,C.PERIHAL_SYIT,
C.FLAG_LUAR_SIMPANAN,C.FLAG_DLM_SIMPANAN,C.FLAG_DLM_MAJLIS,C.FLAG_LUAR_MAJLIS,
C.LOKASI_TANAH,C.RUPABUMI_SELURUH_LOT,C.RUPABUMI_KWSN_TERLIBAT,C.LOT_SELURUH_LOT,C.LOT_JENIS_TANAMAN,
C.LOT_KEADAAN_TANAMAN,C.LOT_KWSN_TERLIBAT,TO_CHAR(SYSDATE,'dd.MM.yyyy') AS TARIKH,
TO_CHAR(C.TARIKH_PEMERIKSAAN,'DD') AS HARI_LAWAT,
CASE 
    WHEN D.ID_KATEGORITANAH = '1' THEN 'Meterpersegi'
    WHEN D.ID_KATEGORITANAH = '2' THEN 'Hektar'
    WHEN D.ID_KATEGORITANAH = '3' THEN 'Meterpersegi'
    WHEN D.ID_KATEGORITANAH = '4' THEN 'Meterpersegi'
    WHEN D.ID_KATEGORITANAH = '5' THEN 'Meterpersegi'
    WHEN D.ID_KATEGORITANAH = '6' THEN 'Meterpersegi'
    WHEN D.ID_KATEGORITANAH = '7' THEN 'Meterpersegi'
    WHEN D.ID_KATEGORITANAH = '8' THEN 'Meterpersegi'
END AS UNIT_LUAS_LOT,
CASE 
    WHEN C.FLAG_JENIS_TANAH = '1' THEN 'Tanah Desa'
    WHEN C.FLAG_JENIS_TANAH = '2' THEN 'Tanah Pekan'
    WHEN C.FLAG_JENIS_TANAH = '3' THEN 'Tanah Bandar'
END AS JENIS_TANAH,
CASE
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '01' THEN 'Januari'
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '02' THEN 'Februari'
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '03' THEN 'Mac'
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '04' THEN 'April'  
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '05' THEN 'Mei'
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '06' THEN 'Jun'
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '07' THEN 'Julai'
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '08' THEN 'Ogos'
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '09' THEN 'September'
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '10' THEN 'Oktober'
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '11' THEN 'November'
    WHEN TO_CHAR(C.TARIKH_PEMERIKSAAN,'MM') = '12' THEN 'Disember'   
    ELSE 'TIADA'
END AS BULAN_LAWAT,    
TO_CHAR(C.TARIKH_PEMERIKSAAN,'YYYY') AS TAHUN_LAWAT,
 (SELECT NO_WARTA FROM TBLPPTWARTA WHERE ID_WARTA =(
    SELECT MAX(TBLPPTWARTA.ID_WARTA) AS ID_WARTA FROM TBLPFDFAIL, TBLPPTPERMOHONAN, TBLPPTTANAHUMUM, TBLPPTPENARIKANBALIK,TBLPPTWARTA 
    WHERE TBLPFDFAIL.ID_FAIL = TBLPPTPERMOHONAN.ID_FAIL
    AND TBLPPTPERMOHONAN.ID_PERMOHONAN = TBLPPTPENARIKANBALIK.ID_PERMOHONAN
    AND TBLPPTPERMOHONAN.ID_PERMOHONAN = TBLPPTWARTA.ID_PERMOHONAN
    AND TBLPPTPENARIKANBALIK.ID_PENARIKANBALIK = TBLPPTTANAHUMUM.ID_PENARIKANBALIK   
    AND TBLPPTTANAHUMUM.ID_TANAHUMUM = $P!{id_tanah})) AS NO_WARTA,
    TO_CHAR(( 
    SELECT TARIKH_WARTA FROM TBLPPTWARTA WHERE ID_WARTA =(
    SELECT MAX(TBLPPTWARTA.ID_WARTA) AS ID_WARTA FROM TBLPFDFAIL, TBLPPTPERMOHONAN, TBLPPTTANAHUMUM, TBLPPTPENARIKANBALIK,TBLPPTWARTA 
    WHERE TBLPFDFAIL.ID_FAIL = TBLPPTPERMOHONAN.ID_FAIL
    AND TBLPPTPERMOHONAN.ID_PERMOHONAN = TBLPPTPENARIKANBALIK.ID_PERMOHONAN
    AND TBLPPTPERMOHONAN.ID_PERMOHONAN = TBLPPTWARTA.ID_PERMOHONAN
    AND TBLPPTPENARIKANBALIK.ID_PENARIKANBALIK = TBLPPTTANAHUMUM.ID_PENARIKANBALIK   
    AND TBLPPTTANAHUMUM.ID_TANAHUMUM = $P!{id_tanah} )  
    ),'DD.MM.YYYY') AS TARIKH_WARTA,
(SELECT NO_WARTA FROM TBLPPTWARTA WHERE ID_WARTA =(
    SELECT MAX(TBLPPTWARTA.ID_WARTA) AS ID_WARTA FROM TBLPFDFAIL, TBLPPTPERMOHONAN, TBLPPTTANAHUMUM, TBLPPTPENARIKANBALIK,TBLPPTWARTA 
    WHERE TBLPFDFAIL.ID_FAIL = TBLPPTPERMOHONAN.ID_FAIL
    AND TBLPPTPERMOHONAN.ID_PERMOHONAN = TBLPPTPENARIKANBALIK.ID_PERMOHONAN
     AND TBLPPTPENARIKANBALIK.ID_PENARIKANBALIK = TBLPPTWARTA.ID_PENARIKANBALIK
    AND TBLPPTPENARIKANBALIK.ID_PENARIKANBALIK = TBLPPTTANAHUMUM.ID_PENARIKANBALIK  
    AND TBLPPTTANAHUMUM.ID_TANAHUMUM = $P!{id_tanah})) AS NO_WARTA_PENARIKAN,
    TO_CHAR(( 
    SELECT TARIKH_WARTA FROM TBLPPTWARTA WHERE ID_WARTA =(
    SELECT MAX(TBLPPTWARTA.ID_WARTA) AS ID_WARTA FROM TBLPFDFAIL, TBLPPTPERMOHONAN, TBLPPTTANAHUMUM, TBLPPTPENARIKANBALIK,TBLPPTWARTA 
    WHERE TBLPFDFAIL.ID_FAIL = TBLPPTPERMOHONAN.ID_FAIL
    AND TBLPPTPERMOHONAN.ID_PERMOHONAN = TBLPPTPENARIKANBALIK.ID_PERMOHONAN
    AND TBLPPTPENARIKANBALIK.ID_PENARIKANBALIK = TBLPPTWARTA.ID_PENARIKANBALIK
    AND TBLPPTPENARIKANBALIK.ID_PENARIKANBALIK = TBLPPTTANAHUMUM.ID_PENARIKANBALIK   
    AND TBLPPTTANAHUMUM.ID_TANAHUMUM = $P!{id_tanah} )  
    ),'DD.MM.YYYY') AS TARIKH_WARTA_PENARIKAN,INITCAP(DA.NAMA_DAERAH) AS NAMA_DAERAH,PH.LUAS_LOT_TARIK,PH.LUAS_AMBIL AS LUAS_AMBIL_PH,
BAL.SEBAB_PENARIKANBALIK, C.LOT_BERHAMPIRAN,C.ULASAN, INITCAP(NN.NAMA_NEGERI) AS NAMA_NEGERI_1, TO_CHAR(SYSDATE, 'DD') AS HARI_SURAT,
    CASE
       WHEN TO_CHAR (SYSDATE, 'MM') = '01' THEN 'Januari'
       WHEN TO_CHAR (SYSDATE, 'MM') = '02' THEN 'Februari'
       WHEN TO_CHAR (SYSDATE, 'MM') = '03' THEN 'Mac'
       WHEN TO_CHAR (SYSDATE, 'MM') = '04' THEN 'April'
       WHEN TO_CHAR (SYSDATE, 'MM') = '05' THEN 'Mei'
       WHEN TO_CHAR (SYSDATE, 'MM') = '06' THEN 'Jun'
       WHEN TO_CHAR (SYSDATE, 'MM') = '07' THEN 'Julai'
       WHEN TO_CHAR (SYSDATE, 'MM') = '08' THEN 'Ogos'
       WHEN TO_CHAR (SYSDATE, 'MM') = '09' THEN 'September'
       WHEN TO_CHAR (SYSDATE, 'MM') = '10' THEN 'Oktober'
       WHEN TO_CHAR (SYSDATE, 'MM') = '11' THEN 'November'
       WHEN TO_CHAR (SYSDATE, 'MM') = '12' THEN 'Disember'
       ELSE 'TIADA'
    END AS BULAN_SURAT,
    TO_CHAR(SYSDATE, 'YYYY') AS TAHUN_SURAT,
CASE
    WHEN D.ID_UNITLUASLOT_CONVERT = 1 THEN 'hektar persegi'
    WHEN D.ID_UNITLUASLOT_CONVERT = 2 THEN 'meter persegi'
END AS UNIT_LUAS, C.KEROSAKAN_TANAH, C.KEROSAKAN_TANAMAN, C.KEROSAKAN_BANGUNAN, C.KOS_DITANGGUNG, C.ULASAN_KESELURUHAN
FROM TBLRUJNEGERI NN,
TBLPPTTANAHUMUM C,TBLPPTHAKMILIK D,TBLPFDFAIL A,TBLPPTPERMOHONAN B,TBLRUJNEGERI E,TBLRUJJENISHAKMILIK F,TBLRUJMUKIM G,
TBLRUJLUAS H,TBLRUJKATEGORI I,TBLRUJDAERAH DA,TBLPPTPENARIKANBALIK BAL,TBLPPTPENARIKANHAKMILIK PH
WHERE  C.ID_HAKMILIK = D.ID_HAKMILIK
AND PH.ID_HAKMILIK = C.ID_HAKMILIK
AND BAL.ID_PENARIKANBALIK = C.ID_PENARIKANBALIK
AND D.ID_PERMOHONAN = B.ID_PERMOHONAN
AND B.ID_DAERAH = DA.ID_DAERAH
AND A.ID_FAIL = B.ID_FAIL
AND E.ID_NEGERI = A.ID_NEGERI
AND F.ID_JENISHAKMILIK = D.ID_JENISHAKMILIK
AND G.ID_MUKIM = D.ID_MUKIM
AND H.ID_LUAS(+) = D.ID_UNITLUASAMBIL
AND I.ID_KATEGORI(+) = D.ID_KATEGORITANAH
AND A.ID_NEGERI = NN.ID_NEGERI
AND C.ID_TANAHUMUM = $P!{id_tanah}]]></queryString>

	<field name="NO_FAIL" class="java.lang.String"/>
	<field name="NAMA_NEGERI" class="java.lang.String"/>
	<field name="TUJUAN" class="java.lang.String"/>
	<field name="NO_LOT" class="java.lang.String"/>
	<field name="KOD_JENIS_HAKMILIK" class="java.lang.String"/>
	<field name="NO_HAKMILIK" class="java.lang.String"/>
	<field name="NAMA_MUKIM" class="java.lang.String"/>
	<field name="LUAS_AMBIL" class="java.lang.String"/>
	<field name="UNIT_LUAS_1" class="java.lang.String"/>
	<field name="PERIHAL_SYIT" class="java.lang.String"/>
	<field name="FLAG_LUAR_SIMPANAN" class="java.lang.String"/>
	<field name="FLAG_DLM_SIMPANAN" class="java.lang.String"/>
	<field name="FLAG_DLM_MAJLIS" class="java.lang.String"/>
	<field name="FLAG_LUAR_MAJLIS" class="java.lang.String"/>
	<field name="LOKASI_TANAH" class="java.lang.String"/>
	<field name="RUPABUMI_SELURUH_LOT" class="java.lang.String"/>
	<field name="RUPABUMI_KWSN_TERLIBAT" class="java.lang.String"/>
	<field name="LOT_SELURUH_LOT" class="java.lang.String"/>
	<field name="LOT_JENIS_TANAMAN" class="java.lang.String"/>
	<field name="LOT_KEADAAN_TANAMAN" class="java.lang.String"/>
	<field name="LOT_KWSN_TERLIBAT" class="java.lang.String"/>
	<field name="TARIKH" class="java.lang.String"/>
	<field name="HARI_LAWAT" class="java.lang.String"/>
	<field name="UNIT_LUAS_LOT" class="java.lang.String"/>
	<field name="JENIS_TANAH" class="java.lang.String"/>
	<field name="BULAN_LAWAT" class="java.lang.String"/>
	<field name="TAHUN_LAWAT" class="java.lang.String"/>
	<field name="NO_WARTA" class="java.lang.String"/>
	<field name="TARIKH_WARTA" class="java.lang.String"/>
	<field name="NO_WARTA_PENARIKAN" class="java.lang.String"/>
	<field name="TARIKH_WARTA_PENARIKAN" class="java.lang.String"/>
	<field name="NAMA_DAERAH" class="java.lang.String"/>
	<field name="LUAS_LOT_TARIK" class="java.lang.String"/>
	<field name="LUAS_AMBIL_PH" class="java.lang.String"/>
	<field name="SEBAB_PENARIKANBALIK" class="java.lang.String"/>
	<field name="LOT_BERHAMPIRAN" class="java.lang.String"/>
	<field name="ULASAN" class="java.lang.String"/>
	<field name="NAMA_NEGERI_1" class="java.lang.String"/>
	<field name="HARI_SURAT" class="java.lang.String"/>
	<field name="BULAN_SURAT" class="java.lang.String"/>
	<field name="TAHUN_SURAT" class="java.lang.String"/>
	<field name="UNIT_LUAS" class="java.lang.String"/>
	<field name="KEROSAKAN_TANAH" class="java.lang.String"/>
	<field name="KEROSAKAN_TANAMAN" class="java.lang.String"/>
	<field name="KEROSAKAN_BANGUNAN" class="java.lang.String"/>
	<field name="KOS_DITANGGUNG" class="java.lang.String"/>
	<field name="ULASAN_KESELURUHAN" class="java.lang.String"/>

		<background>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</background>
		<title>
			<band height="15"  isSplitAllowed="false" >
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="0"
						y="0"
						width="451"
						height="15"
						key="textField-62"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Justified" markup="styled" lineSpacing="Single">
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="11" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Dilaporkan Oleh :"
+"\n\n......................................"
+"\n<style isBold='true' pdfFontName='Helvetica-Bold'>("+($P{nama_pegawai} != null ? $P{nama_pegawai}:"\t\t\t\t")+")</style>"
+"\nPenolong Pegawai Tanah"
+"\nJabatan Ketua Pengarah Tanah dan Galian (Persekutuan)"
+"\nNegeri "+($F{NAMA_NEGERI_1} != null ? $F{NAMA_NEGERI_1}:"")
+"\n\nTarikh : "+($F{HARI_SURAT} != null ? $F{HARI_SURAT}+($F{BULAN_SURAT} != null ? " "+$F{BULAN_SURAT}+($F{TAHUN_SURAT} != null ? " "+$F{TAHUN_SURAT}:""):""):"")]]></textFieldExpression>
				</textField>
			</band>
		</title>
		<pageHeader>
			<band height="0"  isSplitAllowed="false" >
			</band>
		</pageHeader>
		<columnHeader>
			<band height="0"  isSplitAllowed="false" >
			</band>
		</columnHeader>
		<detail>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</detail>
		<columnFooter>
			<band height="0"  isSplitAllowed="false" >
			</band>
		</columnFooter>
		<pageFooter>
			<band height="0"  isSplitAllowed="false" >
			</band>
		</pageFooter>
		<summary>
			<band height="0"  isSplitAllowed="false" >
			</band>
		</summary>
</jasperReport>
