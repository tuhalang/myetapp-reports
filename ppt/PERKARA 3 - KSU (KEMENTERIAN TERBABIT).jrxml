<?xml version="1.0" encoding="UTF-8"  ?>
<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport
		 name="PERKARA 3 - KSU (KEMENTERIAN TERBABIT)"
		 columnCount="1"
		 printOrder="Vertical"
		 orientation="Portrait"
		 pageWidth="595"
		 pageHeight="842"
		 columnWidth="451"
		 columnSpacing="0"
		 leftMargin="72"
		 rightMargin="72"
		 topMargin="144"
		 bottomMargin="72"
		 whenNoDataType="NoDataSection"
		 isTitleNewPage="false"
		 isSummaryNewPage="false">
	<property name="ireport.scriptlethandling" value="0" />
	<property name="ireport.encoding" value="UTF-8" />
	<import value="java.util.*" />
	<import value="net.sf.jasperreports.engine.*" />
	<import value="net.sf.jasperreports.engine.data.*" />

	<parameter name="idFail" isForPrompting="true" class="java.lang.String"/>
	<parameter name="namaPengarah" isForPrompting="true" class="java.lang.String"/>
	<parameter name="id_jawatan" isForPrompting="true" class="java.lang.String"/>
	<parameter name="mukim" isForPrompting="false" class="java.lang.String"/>
	<parameter name="no_fail" isForPrompting="true" class="java.lang.String"/>
	<parameter name="sysdate" isForPrompting="true" class="java.lang.String"/>
	<queryString><![CDATA[SELECT E.ID_NEGERI, A.ID_FAIL, A.NO_FAIL, B.NO_RUJUKAN_SURAT, B.NO_RUJUKAN_PTG, INITCAP(C.NAMA_KEMENTERIAN) AS NAMA_KEMENTERIAN, REPLACE(INITCAP(F.NAMA_AGENSI),'&','&#38;') AS NAMA_AGENSI, REPLACE(NVL(C.ALAMAT1,''),'&','&#38;') AS ALAMAT1, 
    REPLACE(NVL(C.ALAMAT2,''),'&','&#38;') AS ALAMAT2, REPLACE(NVL(C.ALAMAT3,''),'&','&#38;') AS ALAMAT3, 
    NVL(C.POSKOD,'') AS POSKOD, D.NAMA_NEGERI, UPPER(B.TUJUAN) AS TUJUAN, INITCAP(B.TUJUAN) AS TUJUAN_BWH,
    (   SELECT MAX(Z.NO_WARTA)
        FROM TBLPPTWARTA Z
        WHERE B.ID_PERMOHONAN = Z.ID_PERMOHONAN
    )   AS NO_WARTA,
    TO_CHAR((   SELECT MAX(Z.TARIKH_WARTA)
        FROM TBLPPTWARTA Z
        WHERE B.ID_PERMOHONAN = Z.ID_PERMOHONAN
    ),'dd/MM/yyyy')   AS TARIKH_WARTA,
    TO_CHAR(SYSDATE,'DD') AS HARI,
    CASE 
        WHEN TO_CHAR(SYSDATE,'MM')='01' THEN 'Januari'
        WHEN TO_CHAR(SYSDATE,'MM')='02' THEN 'Februari' 
        WHEN TO_CHAR(SYSDATE,'MM')='03' THEN 'Mac'
        WHEN TO_CHAR(SYSDATE,'MM')='04' THEN 'April'
        WHEN TO_CHAR(SYSDATE,'MM')='05' THEN 'Mei'
        WHEN TO_CHAR(SYSDATE,'MM')='06' THEN 'Jun'
        WHEN TO_CHAR(SYSDATE,'MM')='07' THEN 'Julai'
        WHEN TO_CHAR(SYSDATE,'MM')='08' THEN 'Ogos'
        WHEN TO_CHAR(SYSDATE,'MM')='09' THEN 'September'
        WHEN TO_CHAR(SYSDATE,'MM')='10' THEN 'Oktober'
        WHEN TO_CHAR(SYSDATE,'MM')='11' THEN 'November'
        WHEN TO_CHAR(SYSDATE,'MM')='12' THEN 'Disember'
    END AS BULAN, TO_CHAR(SYSDATE,'yyyy') AS TAHUN, INITCAP(E.NAMA_NEGERI_PENUH) AS NEGERIBWH, TO_CHAR(SYSDATE,'DD','NLS_CALENDAR=''ENGLISH HIJRAH''') AS HARI_ISLAM,
    CASE 
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 01 THEN 'Muharam'
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 02 THEN 'Safar'
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 03 THEN 'Rabiulawal'
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 04 THEN 'Rabiulakhir'
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 05 THEN 'Jamadilawal'
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 06 THEN 'Jamadilakhir'
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 07 THEN 'Rejab'
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 08 THEN 'Syaaban'
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 09 THEN 'Ramadhan'
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 10 THEN 'Syawal'
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 11 THEN 'Zulkaedah'
        WHEN TO_CHAR(SYSDATE,'MM','NLS_CALENDAR=''ENGLISH HIJRAH''') = 12 THEN 'Zulhijjah'
    END AS BULAN_ISLAM, TO_CHAR(SYSDATE,'RRRR','NLS_CALENDAR=''ENGLISH HIJRAH''') AS TAHUN_ISLAM, --F.NO_SUBJAKET,
    CASE
        WHEN $P!{id_jawatan} = 1 THEN 'Pengarah'
        WHEN $P!{id_jawatan} = 4 THEN 'Pengarah'
        ELSE 'b.p. Pengarah'
    END AS PENGARAH, G.NAMA_DAERAH, INITCAP(E.NAMA_NEGERI) AS NEGERI_PROJEK
    FROM TBLPFDFAIL A, TBLPPTPERMOHONAN B, TBLRUJKEMENTERIAN C, TBLRUJNEGERI D, TBLRUJNEGERI E,
    TBLRUJAGENSI F, TBLRUJDAERAH G
    WHERE A.ID_FAIL = B.ID_FAIL
    AND A.ID_KEMENTERIAN = C.ID_KEMENTERIAN
    AND C.ID_NEGERI = D.ID_NEGERI
    AND E.ID_NEGERI = CASE 
                         WHEN A.ID_NEGERI = '15' OR A.ID_NEGERI = '16' THEN 14
                         ELSE A.ID_NEGERI
                      END 
    AND B.ID_AGENSI = F.ID_AGENSI(+)
    AND B.ID_DAERAH = G.ID_DAERAH
    AND A.ID_FAIL = $P!{idFail}]]></queryString>

	<field name="ID_NEGERI" class="java.math.BigDecimal"/>
	<field name="ID_FAIL" class="java.math.BigDecimal"/>
	<field name="NO_FAIL" class="java.lang.String"/>
	<field name="NO_RUJUKAN_SURAT" class="java.lang.String"/>
	<field name="NO_RUJUKAN_PTG" class="java.lang.String"/>
	<field name="NAMA_KEMENTERIAN" class="java.lang.String"/>
	<field name="NAMA_AGENSI" class="java.lang.String"/>
	<field name="ALAMAT1" class="java.lang.String"/>
	<field name="ALAMAT2" class="java.lang.String"/>
	<field name="ALAMAT3" class="java.lang.String"/>
	<field name="POSKOD" class="java.lang.String"/>
	<field name="NAMA_NEGERI" class="java.lang.String"/>
	<field name="TUJUAN" class="java.lang.String"/>
	<field name="TUJUAN_BWH" class="java.lang.String"/>
	<field name="NO_WARTA" class="java.lang.String"/>
	<field name="TARIKH_WARTA" class="java.lang.String"/>
	<field name="HARI" class="java.lang.String"/>
	<field name="BULAN" class="java.lang.String"/>
	<field name="TAHUN" class="java.lang.String"/>
	<field name="NEGERIBWH" class="java.lang.String"/>
	<field name="HARI_ISLAM" class="java.lang.String"/>
	<field name="BULAN_ISLAM" class="java.lang.String"/>
	<field name="TAHUN_ISLAM" class="java.lang.String"/>
	<field name="PENGARAH" class="java.lang.String"/>
	<field name="NAMA_DAERAH" class="java.lang.String"/>
	<field name="NEGERI_PROJEK" class="java.lang.String"/>

		<background>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</background>
		<title>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</title>
		<pageHeader>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</pageHeader>
		<columnHeader>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</columnHeader>
		<detail>
			<band height="101"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="0"
						y="88"
						width="451"
						height="13"
						key="textField-21"
						positionType="Float">
							<printWhenExpression><![CDATA[new Boolean($F{ID_NEGERI}.intValue()!=14)]]></printWhenExpression>
						</reportElement>
					<box></box>
					<textElement textAlignment="Justified" markup="styled">
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="11" isBold="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Sekian."
+"\n\n<style isBold='true' pdfFontName='Helvetica-Bold'>'BERKHIDMAT UNTUK NEGARA'</style>"
+"\n\nSaya yang menurut perintah,"
+"\n\n\n\n<style isBold='true' pdfFontName='Helvetica-Bold'>("+($P{namaPengarah} != null ? $P{namaPengarah}:"                                  ")+")</style>"
+"\n"+($F{PENGARAH} != null ? $F{PENGARAH}:"b.p. Pengarah")
+"\nJabatan Ketua Pengarah Tanah dan Galian (Persekutuan)"
+"\nNegeri "+($F{NEGERIBWH} != null ? $F{NEGERIBWH}:"")
+"\n\nFail."
+"\n\nFail Timbul."]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="262"
						y="14"
						width="189"
						height="13"
						key="textField-19"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Right">
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="10" isBold="false" isItalic="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[($P{no_fail} != null ? $P{no_fail}:"")]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="0"
						y="88"
						width="451"
						height="13"
						key="textField-22"
						positionType="Float">
							<printWhenExpression><![CDATA[new Boolean($F{ID_NEGERI}.intValue()==14)]]></printWhenExpression>
						</reportElement>
					<box></box>
					<textElement textAlignment="Justified" markup="styled">
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="11" isBold="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Sekian."
+"\n\n<style isBold='true' pdfFontName='Helvetica-Bold'>'BERKHIDMAT UNTUK NEGARA'</style>"
+"\n\nSaya yang menurut perintah,"
+"\n\n\n\n<style isBold='true' pdfFontName='Helvetica-Bold'>("+($P{namaPengarah} != null ? $P{namaPengarah}:"                                  ")+")</style>"
+"\n"+($F{PENGARAH} != null ? $F{PENGARAH}:"b.p. Pengarah")
+"\nJabatan Ketua Pengarah Tanah dan Galian (Persekutuan)"
+"\n"+($F{NEGERIBWH} != null ? $F{NEGERIBWH}:"")
+"\n\nFail."
+"\n\nFail Timbul."]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="0"
						y="75"
						width="451"
						height="13"
						key="textField-11"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Justified" markup="styled">
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="11" isBold="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Ketua Setiausaha\n"
+($F{NAMA_KEMENTERIAN} != null ? $F{NAMA_KEMENTERIAN}+"\n":"")
+($F{NAMA_AGENSI} != null ? $F{NAMA_AGENSI}+"\n":"")
+($F{ALAMAT1} != null ? $F{ALAMAT1}+"\n":"")
+($F{ALAMAT2} != null ? $F{ALAMAT2}+"\n":"")
+($F{ALAMAT3} != null ? $F{ALAMAT3}+"\n":"")
+($F{POSKOD} != null ? $F{POSKOD}+"\n":"")
+($F{NAMA_NEGERI} != null ? "<style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{NAMA_NEGERI} != null ? $F{NAMA_NEGERI}:"")+"</style>":"")
+"\n\nTuan,"
+"\n\n<style isBold='true' pdfFontName='Helvetica-Bold'>PENGAMBILAN TANAH UNTUK "+($F{TUJUAN} != null ? $F{TUJUAN}:"")+($P{mukim} != null ? "\nMUKIM : "+$P{mukim}+($F{NAMA_DAERAH} != null ? " DAERAH : "+$F{NAMA_DAERAH}:""):"")+"</style>"
+"\n\nDengan hormatnya saya merujuk kepada perkara di atas dan memaklumkan bahawa tanah yang terlibat dengan projek tersebut telahpun diwartakan di bawah Seksyen 8 Akta Pengambilan Tanah 1960 melalui Warta Kerajaan Negeri "+($F{NEGERI_PROJEK} != null ? $F{NEGERI_PROJEK}:"")+" No. <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{NO_WARTA} != null ? $F{NO_WARTA}:"")+"</style> bertarikh <style isBold='true' pdfFontName='Helvetica-Bold'>"+($F{TARIKH_WARTA} != null ? $F{TARIKH_WARTA}:"")+"</style>. Bersama-sama ini dikemukakan satu salinan Warta Kerajaan tersebut."
+"\n\n2.\tJabatan ini sedang mengambil tindakan untuk meneruskan prosiding pengambilan tanah mengikut tatacara yang ditetapkan di bawah Akta Pengambilan Tanah 1960. Bagi mempercepatkan urusan pengambilan tanah, Jabatan ini memohon kerjasama tuan supaya menandakan <style isItalic='true' isBold='true' pdfFontName='Helvetica-BoldOblique'>'demarcate'</style> sempadan kawasan pengambilan tanah yang merupakan tapak bagi "+($F{TUJUAN_BWH} != null ? $F{TUJUAN_BWH}:"")+"."
+"\n\n3.\tTindakan ini perlu dilaksanakan bagi mematuhi peruntukan Seksyen 9 (1)(a) Akta Pengambilan Tanah 1960 sebelum Borang E dan seterusnya Borang I, J dan K boleh dikeluarkan."
+"\n\n4.\tKerjasama dan tindakan segera dari pihak tuan amatlah saya hargai dan didahului dengan ucapan terima kasih."]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="172"
						y="1"
						width="80"
						height="13"
						key="textField-12"
						positionType="Float"/>
					<box></box>
					<textElement>
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="11" isBold="false" isItalic="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Rujukan Tuan"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="172"
						y="14"
						width="80"
						height="13"
						key="textField-13"
						positionType="Float"/>
					<box></box>
					<textElement>
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="11" isBold="false" isItalic="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Rujukan Kami"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="172"
						y="27"
						width="80"
						height="13"
						key="textField-14"
						positionType="Float"/>
					<box></box>
					<textElement>
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="11" isBold="false" isItalic="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Tarikh"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="252"
						y="1"
						width="10"
						height="13"
						key="textField-15"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Center">
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="11" isBold="false" isItalic="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[":"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="252"
						y="14"
						width="10"
						height="13"
						key="textField-16"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Center">
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="11" isBold="false" isItalic="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[":"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="252"
						y="27"
						width="10"
						height="13"
						key="textField-17"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Center">
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="11" isBold="false" isItalic="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[":"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="262"
						y="1"
						width="189"
						height="13"
						key="textField-18"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Right">
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="10" isBold="false" isItalic="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[($F{NO_RUJUKAN_SURAT} != null ? $F{NO_RUJUKAN_SURAT}:"")]]></textFieldExpression>
				</textField>
				<break>
					<reportElement
						x="0"
						y="87"
						width="451"
						height="0"
						key="element-1"/>
				</break>
				<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="262"
						y="26"
						width="189"
						height="22"
						key="textField-23"
						positionType="Float"/>
					<box></box>
					<textElement textAlignment="Right">
						<font fontName="Bookman Old Style" pdfFontName="Helvetica" size="10" isBold="false" isItalic="false" isUnderline="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[($P{sysdate} != null && $P{sysdate} != "" ? $P{sysdate}:"")
+"\n"+$F{HARI_ISLAM}+" "+$F{BULAN_ISLAM}+" "+$F{TAHUN_ISLAM}]]></textFieldExpression>
				</textField>
			</band>
		</detail>
		<columnFooter>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</columnFooter>
		<pageFooter>
			<band height="0"  isSplitAllowed="false" >
			</band>
		</pageFooter>
		<lastPageFooter>
			<band height="18"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="373"
						y="0"
						width="78"
						height="18"
						key="textField">
							<printWhenExpression><![CDATA[new Boolean($V{PAGE_NUMBER}.intValue()!=2)]]></printWhenExpression>
						</reportElement>
					<box></box>
					<textElement textAlignment="Right">
						<font fontName="Bookman Old Style" pdfFontName="Times-Roman" size="11"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["...2/-"]]></textFieldExpression>
				</textField>
			</band>
		</lastPageFooter>
		<summary>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</summary>
</jasperReport>
